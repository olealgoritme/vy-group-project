__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.navigateToScreen=function(t){return n.NavigationActions.navigate({routeName:N,params:t})},e.default=void 0;var t=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=y();if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in t)if(Object.prototype.hasOwnProperty.call(t,p)){var u=s?Object.getOwnPropertyDescriptor(t,p):null;u&&(u.get||u.set)?Object.defineProperty(o,p,u):o[p]=t[p]}o.default=t,n&&n.set(t,o);return o})(r(d[0])),n=r(d[1]),o=r(d[2]),s=r(d[3]),p=r(d[4]),u=r(d[5]),c=r(d[6]),l=r(d[7]),f=h(r(d[8])),v=h(r(d[9]));function h(t){return t&&t.__esModule?t:{default:t}}function y(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return y=function(){return t},t}function P(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function T(t,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&S(t,n)}function S(t,n){return(S=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var N='NewOrderConfirmationScreen';var _=(function(h){function y(t){var n,o,s;return P(this,y),o=this,(n=!(s=O(y).call(this,t))||"object"!=typeof s&&"function"!=typeof s?b(o):s).state={status:{type:'INITIATED'}},n.handleSetStatus=n.handleSetStatus.bind(b(n)),n.handleBackPress=n.handleBackPress.bind(b(n)),n.getReceiptParams=n.getReceiptParams.bind(b(n)),n.navigateToReceipt=n.navigateToReceipt.bind(b(n)),n.navigateToNetsTerminal=n.navigateToNetsTerminal.bind(b(n)),n.navigateToVippsPayment=n.navigateToVippsPayment.bind(b(n)),n}var S,N,_;return R(y,t.Component),S=y,(N=[{key:"navigateToReceipt",value:function(t,n){u.remoteLogger.info(u.sources.ORDER_CONFIRMATION,'Moving to receipt',{orderId:t.id,paymentType:""+(n||'UNKNOWN')}),this.props.navigation.dispatch((0,o.navigateToScreen)(this.getReceiptParams(t,n))),this.props.navigation.navigate('Receipt',this.getReceiptParams(t,n))}},{key:"navigateToNetsTerminal",value:function(t,n){this.props.navigation.dispatch((0,p.navigateToScreen)({receiptParams:this.getReceiptParams(t,'CARD'),url:n}))}},{key:"navigateToVippsPayment",value:function(t){this.props.navigation.dispatch((0,s.navigateToScreen)({receiptParams:this.getReceiptParams(t,'VIPPS'),order:t}))}},{key:"getReceiptParams",value:function(t,n){var o=this,s=this.props.navigation.state.params,p=s.previousStack,u=s.origin,c=t.itineraries[0];return{orderId:t.id,tripId:c.tripId,from:c.from,to:c.to,previousStack:p,origin:u,onCaptureFailed:function(t){return o.handleCaptureFailed(t,n)}}}},{key:"handleCaptureFailed",value:function(t,o){var s=(0,c.getMessageFromErrorIfPresent)(t)||(0,f.default)('capture_failed_generic_message'),p=n.NavigationActions.navigate({routeName:'NewOrderConfirmationScreen',key:this.props.navigation.state.key});this.props.navigation.dispatch(p),this.handleSetStatus({type:'ERROR',message:s});var l=(o||'UNKNOWN')+"_CAPTURE_FAILED";u.remoteLogger.error(u.sources.ORDER_CONFIRMATION,'Capture payment failed',{orderId:this.props.navigation.state.params.order.id,error:'Error presented to user: '+s,source:l})}},{key:"handleSetStatus",value:function(t){this.setState({status:t})}},{key:"handleBackPress",value:function(){this.props.navigation.state.params.isNewLogin?this.props.navigation.pop(2):this.props.navigation.goBack(null)}},{key:"render",value:function(){var n=this.props.navigation.state.params.order;return t.createElement(l.ScreenView,null,t.createElement(v.default,{status:this.state.status,onSetStatus:this.handleSetStatus,order:n,navigateToReceipt:this.navigateToReceipt,navigateToNetsTerminal:this.navigateToNetsTerminal,navigateToVippsPayment:this.navigateToVippsPayment,goBack:this.handleBackPress}))}}])&&T(S.prototype,N),_&&T(S,_),y})();e.default=_},1704,[7,435,1705,1709,1719,633,636,653,1234,1721]);