__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=y();if(n&&n.has(t))return n.get(t);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var u=o?Object.getOwnPropertyDescriptor(t,l):null;u&&(u.get||u.set)?Object.defineProperty(s,l,u):s[l]=t[l]}s.default=t,n&&n.set(t,s);return s})(r(d[0])),n=r(d[1]),s=b(r(d[2])),o=b(r(d[3])),l=r(d[4]),u=r(d[5]),p=r(d[6]),h=b(r(d[7])),f=r(d[8]),c=r(d[9]);function b(t){return t&&t.__esModule?t:{default:t}}function y(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return y=function(){return t},t}function I(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,o)}return s}function v(t){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?I(Object(s),!0).forEach(function(n){N(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):I(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function N(t,n,s){return n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,t}function V(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function O(t,n){for(var s=0;s<n.length;s++){var o=n[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&E(t,n)}function E(t,n){return(E=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var M={input:{marginTop:18}},j=(function(b){function y(t){var n,s,o;return V(this,y),s=this,(n=!(o=C(y).call(this,t))||"object"!=typeof o&&"function"!=typeof o?_(s):o).state={updateUser:p.NOT_STARTED,formHasBeenModified:!1,firstNameInput:t.user.firstName,isFirstNameValid:void 0,lastNameInput:t.user.lastName,isLastNameValid:void 0,birthdateInput:t.user.birthdate,mobileNumberInput:t.user.cellphone?t.user.cellphone:'',isMobileNumberValid:void 0,zipCodeInput:t.user.address.zipCode,isZipCodeValid:void 0,emailInput:t.user.email,isEmailValid:void 0},n.onSubmit=n.onSubmit.bind(_(n)),n.handleIsValidMobileNumber=n.handleIsValidMobileNumber.bind(_(n)),n.handleIsValidFirstName=n.handleIsValidFirstName.bind(_(n)),n.handleIsValidLastName=n.handleIsValidLastName.bind(_(n)),n.handleIsValidEmail=n.handleIsValidEmail.bind(_(n)),n.handleIsValidZipCode=n.handleIsValidZipCode.bind(_(n)),n.handleBirthdayInput=n.handleBirthdayInput.bind(_(n)),n}var I,N,E;return F(y,t.Component),I=y,(N=[{key:"onFormChange",value:function(t){this.setState(v({},t,{formHasBeenModified:!0,updateUser:p.NOT_STARTED})),this.props.onFormChanged()}},{key:"handleIsValidFirstName",value:function(){var t=(0,f.isValidName)(this.state.firstNameInput);this.setState({isFirstNameValid:t})}},{key:"handleIsValidLastName",value:function(){var t=(0,f.isValidName)(this.state.lastNameInput);this.setState({isLastNameValid:t})}},{key:"handleIsValidZipCode",value:function(){var t=(0,f.isValidZipCode)(this.state.zipCodeInput);this.setState({isZipCodeValid:t})}},{key:"handleIsValidMobileNumber",value:function(){var t=(0,f.isValidMobileNumber)(this.state.mobileNumberInput);this.setState({isMobileNumberValid:t})}},{key:"handleIsValidEmail",value:function(){var t=(0,f.isValidEmail)(this.state.emailInput);this.setState({isEmailValid:t})}},{key:"handleBirthdayInput",value:function(t){this.onFormChange({birthdateInput:t})}},{key:"isFormChanged",value:function(){return this.state.formHasBeenModified}},{key:"isFormValid",value:function(){return(0,f.isValidName)(this.state.firstNameInput)&&(0,f.isValidName)(this.state.lastNameInput)&&(0,f.isValidZipCode)(this.state.zipCodeInput)&&(0,f.isValidMobileNumber)(this.state.mobileNumberInput)&&(0,f.isValidEmail)(this.state.emailInput)}},{key:"isFormValidForSubmit",value:function(){return!this.isLoading()&&this.isFormChanged()&&this.isFormValid()}},{key:"onSubmit",value:function(){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({updateUser:p.LOADING}),t.prev=1,t.next=4,regeneratorRuntime.awrap((0,u.updateUserWithMoreInfo)({userId:this.props.user.userId,firstName:this.state.firstNameInput,lastName:this.state.lastNameInput,birthdate:(0,s.default)(this.state.birthdateInput),mobileNumber:this.state.mobileNumberInput,zipCode:this.state.zipCodeInput,email:this.state.emailInput}));case 4:this.setState({updateUser:{success:!0,value:{}},formHasBeenModified:!1}),this.props.onUserUpdated(),this.props.onSubmit((0,c.successMessage)((0,o.default)('user_data_updated'))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),this.setState({updateUser:(0,p.WITH_ERROR)(t.t0.toString()),formHasBeenModified:!1}),this.props.onSubmit((0,c.errorMessage)((0,o.default)('error_occurred')));case 13:case"end":return t.stop()}},null,this,[[1,9]])}},{key:"isLoading",value:function(){return(0,p.IS_LOADING)(this.state.updateUser)}},{key:"render",value:function(){var u=this;return t.createElement(n.View,{style:{paddingTop:30}},t.createElement(l.TextInputField,{label:(0,o.default)('first_name'),value:this.state.firstNameInput,onChange:function(t){return u.onFormChange({firstNameInput:t,isFirstNameValid:void 0})},onBlur:this.handleIsValidFirstName,errorMessage:!1===this.state.isFirstNameValid?(0,o.default)('name_message'):void 0}),t.createElement(l.TextInputField,{style:M.input,label:(0,o.default)('last_name'),value:this.state.lastNameInput,onChange:function(t){return u.onFormChange({lastNameInput:t,isLastNameValid:void 0})},onBlur:this.handleIsValidLastName,errorMessage:!1===this.state.isLastNameValid?(0,o.default)('name_message'):void 0}),t.createElement(l.TextInputField,{style:M.input,label:(0,o.default)('mobile_number'),value:this.state.mobileNumberInput,onChange:function(t){return u.onFormChange({mobileNumberInput:t})},returnKeyType:"done",maxLength:8,keyboardType:"phone-pad",onBlur:this.handleIsValidMobileNumber,errorMessage:!1===this.state.isMobileNumberValid?(0,o.default)('mobile_number_message'):void 0}),t.createElement(l.EmailInputField,{style:M.input,label:(0,o.default)('email'),value:this.state.emailInput,onChange:function(t){return u.onFormChange({emailInput:t,isEmailValid:void 0})},onBlur:this.handleIsValidEmail,errorMessage:!1===this.state.isEmailValid?(0,o.default)('email_message'):void 0}),t.createElement(l.TextInputField,{style:M.input,label:(0,o.default)('zip_code'),value:this.state.zipCodeInput,onChange:function(t){return u.onFormChange({zipCodeInput:t,isZipCodeValid:void 0})},keyboardType:"number-pad",maxLength:4,returnKeyType:"done",onBlur:this.handleIsValidZipCode,errorMessage:!1===this.state.isZipCodeValid?(0,o.default)('zip_code_message'):void 0}),t.createElement(h.default,{style:M.input,label:(0,o.default)('birthdate'),onChange:this.handleBirthdayInput,selectedDate:(0,s.default)(this.state.birthdateInput),minimumDate:(0,s.default)('1900-01-01'),maximumDate:(0,s.default)(),mode:"date"}),t.createElement(l.PrimaryButton,{children:(0,o.default)('save'),disabled:!this.isFormValidForSubmit(),loading:this.isLoading(),containerStyle:{marginTop:54},onPress:this.onSubmit}))}}])&&O(I.prototype,N),E&&O(I,E),y})();e.default=j},1829,[7,10,630,1500,653,616,1830,1499,1831,1487]);