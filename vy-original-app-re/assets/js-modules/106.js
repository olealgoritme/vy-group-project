__d(function(g,r,i,a,m,e,d){'use strict';var t,n=(t=r(d[0]))&&t.__esModule?t:{default:t};function o(t,n){if(null==t)return{};var o,c,u=s(t,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(c=0;c<l.length;c++)o=l[c],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(u[o]=t[o])}return u}function s(t,n){if(null==t)return{};var o,s,c={},u=Object.keys(t);for(s=0;s<u.length;s++)o=u[s],n.indexOf(o)>=0||(c[o]=t[o]);return c}function c(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function u(t,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&y(t,n)}function y(t,n){return(y=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var p=r(d[1]),h=r(d[2]),_=r(d[3]),v=r(d[4]),E=(r(d[5]),r(d[6])),O=r(d[7]),k=r(d[8]),w=r(d[9]),S=0,I=1,N=2,C=3,T=['close','error','message','open'],L=0,j=(function(t){function s(t,u,b){var y,p,h;c(this,s),p=this,(y=!(h=f(s).call(this))||"object"!=typeof h&&"function"!=typeof h?l(p):h).CONNECTING=S,y.OPEN=I,y.CLOSING=N,y.CLOSED=C,y.readyState=S,'string'==typeof u&&(u=[u]);var _=b||{},E=_.headers,O=void 0===E?{}:E,k=o(_,["headers"]);return k&&'string'==typeof k.origin&&(console.warn('Specifying `origin` as a WebSocket connection option is deprecated. Include it under `headers` instead.'),O.origin=k.origin,delete k.origin),Object.keys(k).length>0&&console.warn('Unrecognized WebSocket connection option(s) `'+Object.keys(k).join('`, `')+"`. Did you mean to put these under `headers`?"),Array.isArray(u)||(u=null),y._eventEmitter=new v(n.default),y._socketId=L++,y._registerEvents(),n.default.connect(t,u,{headers:O},y._socketId),y}var y,j,A;return b(s,_.apply(undefined,T)),y=s,(j=[{key:"close",value:function(t,n){this.readyState!==this.CLOSING&&this.readyState!==this.CLOSED&&(this.readyState=this.CLOSING,this._close(t,n))}},{key:"send",value:function(t){if(this.readyState===this.CONNECTING)throw new Error('INVALID_STATE_ERR');if(t instanceof p)return w(h.isAvailable,'Native module BlobModule is required for blob support'),void h.sendOverSocket(t,this._socketId);if('string'!=typeof t){if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new Error('Unsupported data type');n.default.sendBinary(k(t),this._socketId)}else n.default.send(t,this._socketId)}},{key:"ping",value:function(){if(this.readyState===this.CONNECTING)throw new Error('INVALID_STATE_ERR');n.default.ping(this._socketId)}},{key:"_close",value:function(t,o){var s='number'==typeof t?t:1e3,c='string'==typeof o?o:'';n.default.close(s,c,this._socketId),h.isAvailable&&'blob'===this._binaryType&&h.removeWebSocketHandler(this._socketId)}},{key:"_unregisterEvents",value:function(){this._subscriptions.forEach(function(t){return t.remove()}),this._subscriptions=[]}},{key:"_registerEvents",value:function(){var t=this;this._subscriptions=[this._eventEmitter.addListener('websocketMessage',function(n){if(n.id===t._socketId){var o=n.data;switch(n.type){case'binary':o=O.toByteArray(n.data).buffer;break;case'blob':o=h.createFromOptions(n.data)}t.dispatchEvent(new E('message',{data:o}))}}),this._eventEmitter.addListener('websocketOpen',function(n){n.id===t._socketId&&(t.readyState=t.OPEN,t.protocol=n.protocol,t.dispatchEvent(new E('open')))}),this._eventEmitter.addListener('websocketClosed',function(n){n.id===t._socketId&&(t.readyState=t.CLOSED,t.dispatchEvent(new E('close',{code:n.code,reason:n.reason})),t._unregisterEvents(),t.close())}),this._eventEmitter.addListener('websocketFailed',function(n){n.id===t._socketId&&(t.readyState=t.CLOSED,t.dispatchEvent(new E('error',{message:n.message})),t.dispatchEvent(new E('close',{message:n.message})),t._unregisterEvents(),t.close())})]}},{key:"binaryType",get:function(){return this._binaryType},set:function(t){if('blob'!==t&&'arraybuffer'!==t)throw new Error("binaryType must be either 'blob' or 'arraybuffer'");'blob'!==this._binaryType&&'blob'!==t||(w(h.isAvailable,'Native module BlobModule is required for blob support'),'blob'===t?h.addWebSocketHandler(this._socketId):h.removeWebSocketHandler(this._socketId)),this._binaryType=t}}])&&u(y.prototype,j),A&&u(y,A),s})();j.CONNECTING=S,j.OPEN=I,j.CLOSING=N,j.CLOSED=C,m.exports=j},106,[107,94,92,96,99,35,108,102,101,11]);