__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.login=function(t,s){var o=p.login();return(0,n.default)(o,{method:'POST',body:JSON.stringify({username:t,password:s,keepLoggedIn:!0})})},e.fetchFavorites=h,e.addFavorite=function(t,u){var c=p.favorites((0,s.getUserId)());return(0,n.default)(c,{method:'POST',body:JSON.stringify({from:t,to:u})}).then(function(t){return(0,o.saveFavorites)(t),t})},e.deleteFavorite=function(t){var u=p.favorites((0,s.getUserId)());return(0,n.default)(u,{method:'DELETE',body:JSON.stringify(t)}).then(function(t){return(0,o.saveFavorites)(t),t})},e.getFavoritesFromCacheThenRemote=function(){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if((0,s.getUserId)()){t.next=2;break}throw Error("Can't retrieve favorites without an userId");case 2:return t.prev=2,t.next=5,regeneratorRuntime.awrap((0,o.getFavorites)());case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t.catch(2),t.prev=10,t.next=13,regeneratorRuntime.awrap(h(0));case 13:return t.abrupt("return",t.sent);case 16:throw t.prev=16,t.t1=t.catch(10),Error('Unable to fetch favorites');case 19:case"end":return t.stop()}},null,null,[[2,8],[10,16]])},e.getUserProfile=function(t){var s,o;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return s=p.userDetails(t),u.next=3,regeneratorRuntime.awrap((0,n.default)(s));case 3:return o=u.sent,u.abrupt("return",v(o));case 5:case"end":return u.stop()}})},e.createUserIfEmailNotInUse=function(t,s){var o=p.createUser();return(0,n.default)(o,{method:'POST',body:JSON.stringify({email:t,password:s})})},e.updateUserWithMoreInfo=function(t){var s,o,u;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:return s=JSON.stringify({userId:t.userId,firstName:t.firstName,lastName:t.lastName,birthdate:t.birthdate.format('YYYY-MM-DD'),cellphone:t.mobileNumber,email:t.email,address:{zipCode:t.zipCode}}),o=p.userDetails(t.userId),c.next=4,regeneratorRuntime.awrap((0,n.default)(o,{method:'POST',body:s}));case 4:return u=c.sent,c.abrupt("return",v(u));case 6:case"end":return c.stop()}})},e.getConsentsForUser=function(t){var s=p.userConsents(t);return(0,n.default)(s,{method:'GET'})},e.updateConsentsForUser=function(t,s){var o=p.userConsents(t);return(0,n.default)(o,{method:'POST',body:JSON.stringify(s)})},e.deletePaymentCard=function(t){var o=p.paymentAgreement((0,s.getUserId)(),t);return(0,n.default)(o,{method:'DELETE'})},e.resetPassword=function(t,s,o){var u=p.resetPassword();return(0,n.default)(u,{method:'POST',body:JSON.stringify({email:t,oneTimePassword:s,newPassword:o})})},e.forgotPassword=function(t){var s=p.forgotPassword();return(0,n.default)(s,{method:'POST',body:JSON.stringify({email:t})})},e.getTickerMessagesFromCacheOrRemote=e.fetchEmployeeTicketRights=e.getFeatureToggles=e.endpoints=void 0;var t=f(r(d[0])),n=f(r(d[1])),s=r(d[2]),o=r(d[3]),u=r(d[4]),c=r(d[5]);function f(t){return t&&t.__esModule?t:{default:t}}var l=t.default.USER_SERVICE_URL,p={favorites:function(t){return l+"/users/"+t+"/favorites"},createUser:function(){return l+"/users/new"},userDetails:function(t){return l+"/users/"+t},userConsents:function(t){return l+"/users/"+t+"/consents"},featureToggles:function(){return l+"/feature-toggles/app"},employeeTicketRights:function(t){return l+"/users/"+t+"/employeeticketrights"},paymentAgreement:function(t,n){return l+"/users/"+t+"/paymentagreements/"+n},resetPassword:function(){return l+"/api/authentication/reset-password"},login:function(){return l+"/api/authentication/login"},forgotPassword:function(){return l+"/api/authentication/forgot-password"},tickerMessage:function(){return l+"/api/messages"}};function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,u=p.favorites((0,s.getUserId)())+"?numberOfNextDepartures="+t;return(0,n.default)(u,{method:'GET'}).then(function(t){return(0,o.saveFavorites)(t),t})}function v(t){var n='Navn ikke oppgitt'!==t.firstName?t.firstName:'',s='.'!==t.lastName?t.lastName:'';return{userId:t.userId,firstName:n,lastName:s,email:t.email,birthdate:t.birthdate,cellphone:t.cellphone,address:t.address,hasEmployeeTicketRights:t.hasEmployeeTicketRights}}e.endpoints=p;e.getFeatureToggles=function(){var t,s;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=p.featureToggles(),o.next=3,regeneratorRuntime.awrap((0,n.default)(t,{method:'GET'}));case 3:return s=o.sent,(0,u.storeFeatureToggles)(s),o.abrupt("return",s);case 6:case"end":return o.stop()}})};e.fetchEmployeeTicketRights=function(t){var s;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return s=p.employeeTicketRights(t),o.abrupt("return",(0,n.default)(s,{method:'GET'}));case 2:case"end":return o.stop()}})};var y=void 0;e.getTickerMessagesFromCacheOrRemote=function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(y&&Date.now()<y+12e4)){n.next=5;break}return n.abrupt("return",(0,c.getTickerMessages)());case 5:return n.prev=5,n.next=8,regeneratorRuntime.awrap(w());case 8:if(!(t=n.sent)){n.next=13;break}return(0,c.setTickerMessages)(t),y=Date.now(),n.abrupt("return",t);case 13:n.next=18;break;case 15:return n.prev=15,n.t0=n.catch(5),n.abrupt("return",void 0);case 18:case"end":return n.stop()}},null,null,[[5,15]])};var w=function(){var t;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=p.tickerMessage(),s.next=3,regeneratorRuntime.awrap((0,n.default)(t,{method:'GET',headers:{Accept:'application/json'}}));case 3:return s.abrupt("return",s.sent);case 4:case"end":return s.stop()}})}},616,[617,618,626,650,647,652]);