__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=k(r(d[0])),n=S(r(d[1])),o=S(r(d[2])),l=S(r(d[3])),u=k(r(d[4])),s=S(r(d[5])),c=S(r(d[6])),f=r(d[7]),p=r(d[8]),y=r(d[9]),h=r(d[10]),b=r(d[11]),v=r(d[12]),E=r(d[13]);function S(t){return t&&t.__esModule?t:{default:t}}function w(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return w=function(){return t},t}function k(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=w();if(n&&n.has(t))return n.get(t);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var s=l?Object.getOwnPropertyDescriptor(t,u):null;s&&(s.get||s.set)?Object.defineProperty(o,u,s):o[u]=t[u]}return o.default=t,n&&n.set(t,o),o}function O(t,n){return D(t)||P(t,n)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function P(t,n){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],l=!0,u=!1,s=void 0;try{for(var c,f=t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(l=(c=f.next()).done)&&(o.push(c.value),!n||o.length!==n);l=!0);}catch(t){u=!0,s=t}finally{try{l||null==f.return||f.return()}finally{if(u)throw s}}return o}}function D(t){if(Array.isArray(t))return t}var j=function(t){switch(t&&t.status){case null:case'finished':return o.default;case'unassigned':case'assigned':case'onItsWay':case'arrived':case'passengerOnBoard':case'canceled':case'noshow':case'bookingServiceFailed':default:return n.default}},I=function(t,n){var o=n&&n.status,l=n&&n.trackingStatus&&n.trackingStatus.carId;switch(o){case'unassigned':return t.companyDetails.name+" "+(0,s.default)('statusUnassigned');case'assigned':return t.companyDetails.name+" "+(0,s.default)('statusAssigned');case'onItsWay':return l+" "+(0,s.default)('statusOnItsWay');case'arrived':return l+" "+(0,s.default)('statusArrived');case'passengerOnBoard':return""+(0,s.default)('statusPassengerOnBoard');case'canceled':case'noshow':case'bookingServiceFailed':return o;case'finished':return(0,s.default)('statusFinished');default:return(0,s.default)('fetchingStatus')}};var M=b.StyleSheet.create({info:{backgroundColor:y.colors.white,position:'absolute',bottom:0,left:0,right:0,paddingHorizontal:24,paddingBottom:24,justifyContent:'flex-start',alignContent:'flex-start'},statusBar:{flex:1,flexDirection:'row',justifyContent:'flex-start',alignItems:'center',paddingVertical:24},map:{flex:5},icon:function(){return{position:'absolute',alignSelf:'flex-end',marginTop:(0,v.isNotchPhone)()?42:24,paddingRight:30}}}),T=function(y){var v=y.navigation.state.params,S=v.route,w=v.offer,k=v.tripId,x=O((0,t.useState)(),2),P=x[0],D=x[1],T=(0,t.useRef)(null),F=O((0,t.useState)(!0),2),R=F[0],_=F[1],L={animate:!0,edgePadding:{top:150,bottom:150,left:70,right:70}};(0,t.useEffect)(function(){P&&'finished'===P.status&&y.navigation.dispatch((0,E.navigateToScreen)({route:S,tripId:k,offer:w}))},[P]),(0,c.default)(function(){B()},1500);var B=function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap((0,f.fetchTripStatus)());case 3:t=n.sent,D(t),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log('Not able to fetch TripStatus, with error: ',n.t0);case 10:case"end":return n.stop()}},null,null,[[0,7]])},C=P&&P.trackingStatus&&{latitude:P.trackingStatus.latitude,longitude:P.trackingStatus.longitude};(0,t.useEffect)(function(){T.current&&T.current.fitToSuppliedMarkers(['carLocation','userLocation'],L)},[C]);var V=j(P),z=I(w,P);return t.default.createElement(t.default.Fragment,null,t.default.createElement(u.default,{ref:T,style:M.map,provider:u.PROVIDER_GOOGLE,zoomEnabled:!1,zoomTapEnabled:!1,pitchEnabled:!1,scrollEnabled:!1,initialRegion:{latitude:59.9131026,longitude:10.7398053,latitudeDelta:.0922,longitudeDelta:.0421}},t.default.createElement(u.Marker,{identifier:'userLocation',coordinate:{latitude:parseFloat(S.from.latitude),longitude:parseFloat(S.from.longitude)}},t.default.createElement(n.default,{height:30,width:30})),t.default.createElement(u.Marker,{coordinate:{latitude:parseFloat(S.to.latitude),longitude:parseFloat(S.to.longitude)}},t.default.createElement(o.default,{height:30,width:30})),C&&t.default.createElement(u.Marker,{identifier:'carLocation',coordinate:{latitude:C.latitude,longitude:C.longitude}},t.default.createElement(b.Image,{source:p.bybilPinGreen,style:{height:30,width:30},resizeMode:"contain"}))),t.default.createElement(l.default,{icon:p.closeDarkBackground,style:{borderRadius:20},positionStyle:M.icon(),onPress:function(){return y.navigation.navigate('StationChooserScreen')}}),t.default.createElement(b.View,{style:M.info},t.default.createElement(b.View,{style:{flexDirection:'row',alignContent:'space-between',alignItems:'center'}},t.default.createElement(b.View,{style:M.statusBar},t.default.createElement(V,{width:12,height:12}),t.default.createElement(h.MediumText,{style:{marginLeft:12}},z)),t.default.createElement(b.TouchableOpacity,{onPress:function(){_(!R)}},t.default.createElement(b.Image,{source:R?p.minimize:p.expand}))),!R&&t.default.createElement(t.default.Fragment,null,t.default.createElement(h.MediumText,{style:{paddingRight:30}},(0,s.default)('offerConfirmation')),t.default.createElement(h.SmallText,{style:{paddingVertical:30},onPress:function(){return b.Linking.openURL("tel:"+w.companyDetails.phoneNumber)}},"For avbestilling kontakt "+w.companyDetails.name+" p\xe5 ",t.default.createElement(h.SmallText,{actionGreen:!0},w.companyDetails.phoneNumber)))))};e.default=T},1935,[7,1930,1931,1929,1936,1934,1953,1457,675,414,653,10,968,1954]);