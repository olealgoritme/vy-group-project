__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]),s=r(d[4]),c=r(d[5]);function p(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,u)}return o}function l(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?p(Object(o),!0).forEach(function(n){f(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function f(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function b(t,n){return h(t)||v(t,n)||O()}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function v(t,n){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],u=!0,s=!1,c=void 0;try{for(var p,l=t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(u=(p=l.next()).done)&&(o.push(p.value),!n||o.length!==n);u=!0);}catch(t){s=!0,c=t}finally{try{u||null==l.return||l.return()}finally{if(s)throw c}}return o}}function h(t){if(Array.isArray(t))return t}var y={OK:200,NO_CONTENT:204,NOT_MODIFIED:304},w={'Content-Type':'application/json'},x=function(t,n){if(t.headers.has(n))return t.headers.get(n)},j=function(t){return t.status!==y.NO_CONTENT&&'application/json'===x(t,'content-type')};function R(t){var n,o,u,s,c,p,l;return regeneratorRuntime.async(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,regeneratorRuntime.awrap(t);case 3:n=f.sent,f.next=9;break;case 6:throw f.prev=6,f.t0=f.catch(0),{json:{},response:null,error:f.t0};case 9:return f.prev=9,f.next=12,regeneratorRuntime.awrap(T(n));case 12:o=f.sent,f.next=18;break;case 15:throw f.prev=15,f.t1=f.catch(9),{json:{},response:n,error:f.t1};case 18:return f.next=20,regeneratorRuntime.awrap(E(o));case 20:return u=f.sent,f.next=23,regeneratorRuntime.awrap(N(u));case 23:if(s=f.sent,c=b(s,2),p=c[0],l=c[1],p.status!==y.NOT_MODIFIED&&p.status!==y.NO_CONTENT){f.next=29;break}return f.abrupt("return");case 29:return f.abrupt("return",l);case 30:case"end":return f.stop()}},null,null,[[0,6],[9,15]])}function T(t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t,!j(t)){n.next=7;break}return n.next=4,regeneratorRuntime.awrap(t.json());case 4:n.t1=n.sent,n.next=8;break;case 7:n.t1={};case 8:return n.t2=n.t1,n.abrupt("return",[n.t0,n.t2]);case 10:case"end":return n.stop()}})}function E(t){var n=b(t,2),o=n[0],u=n[1];if(o.ok||o.status===y.NOT_MODIFIED)return[o,u];throw{json:u,response:o,error:null}}function N(o){var u,s,c,p;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:if(u=b(o,2),s=u[0],c=u[1],p=x(s,'etag'),s.status!==y.OK||!p){l.next=11;break}return l.prev=3,l.next=6,regeneratorRuntime.awrap((0,n.insertValueAndETagForResource)(s.url,(0,t.deepClone)(c),String(p)));case 6:l.next=11;break;case 8:l.prev=8,l.t0=l.catch(3),console.warn("[baseFetch] Failed to store ETag for "+s.url,l.t0);case 11:return l.abrupt("return",[s,c]);case 12:case"end":return l.stop()}},null,null,[[3,8]])}var k=function(t){var n,u,s,p,l,f,O,v,h,y,x,j,R,T,E;return regeneratorRuntime.async(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,regeneratorRuntime.awrap((0,o.getSharedHeaders)());case 2:return n=N.sent,N.next=5,regeneratorRuntime.awrap((0,c.getJSBundleVersion)());case 5:for(u=N.sent,s=new Headers(w),u&&s.set('jsBundleVersion',u),p=0,l=Object.entries(n);p<l.length;p++)f=l[p],O=b(f,2),v=O[0],(h=O[1])&&s.set(v,h);for(y=0,x=Object.entries(t);y<x.length;y++)j=x[y],R=b(j,2),T=R[0],E=R[1],s.set(T,E);return N.abrupt("return",s);case 11:case"end":return N.stop()}})};function D(t,n,o){var u=n.get('x-user-id'),s=u&&t.indexOf(u)?t.replace(u,'{userId}'):t,c=!!n.get('x-login-token');return{url:s,urlRaw:t,status:o&&o.response&&o.response.status,xUserIdHeader:u,hasLoginToken:c}}var P=function(t){var n,o,c=arguments;return regeneratorRuntime.async(function(p){for(;;)switch(p.prev=p.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},p.next=3,regeneratorRuntime.awrap(k(n.headers||{}));case 3:return o=p.sent,p.prev=4,p.next=7,regeneratorRuntime.awrap(R(fetch(t,l({},n,{headers:o}))));case 7:return p.abrupt("return",p.sent);case 10:throw p.prev=10,p.t0=p.catch(4),u.remoteLogger.info(s.GENERAL,'Fetch error',D(t,o,p.t0)),p.t0;case 14:case"end":return p.stop()}},null,null,[[4,10]])};e.default=P},618,[619,620,632,633,649,648]);