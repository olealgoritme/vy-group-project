__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchActiveTickets=function(){var t,n,s;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=(0,c.getUserId)(),n=v+"/users/"+t+"/tickets/active?includeBusTickets=true",o.prev=2,o.next=5,regeneratorRuntime.awrap((0,u.default)(n));case 5:return s=o.sent,o.next=8,regeneratorRuntime.awrap(T(s));case 8:return o.abrupt("return",s);case 11:throw o.prev=11,o.t0=o.catch(2),o.t0;case 14:case"end":return o.stop()}},null,null,[[2,11]])},e.fetchExpiredTickets=function(){var t=(0,c.getUserId)(),n=v+"/users/"+t+"/tickets/expired?includeBusTickets=true";return(0,u.default)(n,{method:'GET'})},e.fetchCancelledTickets=function(){var t=(0,c.getUserId)(),n=v+"/users/"+t+"/tickets/cancelled?includeBusTickets=true";return(0,u.default)(n,{method:'GET'})},e.fetchValidationDataForTickets=h,e.claimPickupCode=function(t){var n=(0,c.getUserId)(),s=v+"/users/"+n+"/pickupcode/claim";return(0,u.default)(s,{method:'POST',body:JSON.stringify({code:t})})},e.getInformationForTicket=function(t){var n=(0,c.getUserId)(),s=v+"/users/"+n+"/itinerary/"+t;return(0,u.default)(s,{method:'GET'})},e.getRefundOptionsForTicket=function(t){var n=(0,c.getUserId)(),s=v+"/users/"+n+"/refund/"+t+"/options";return(0,u.default)(s,{method:'GET'})},e.refundTicket=function(t){var n=(0,c.getUserId)(),s=v+"/users/"+n+"/refund/"+t;return(0,u.default)(s,{method:'POST'})},e.getTransferOptionsForTicket=function(t){var n=(0,c.getUserId)(),s=v+"/users/"+n+"/transfer/"+t+"/options";return(0,u.default)(s,{method:'GET'})},e.transferTicket=function(t){var n=(0,c.getUserId)(),s=v+"/users/"+n+"/transfer/"+t;return(0,u.default)(s,{method:'POST'})},e.fetchUserHasValidPeriodTicket=function(){var t=(0,c.getUserId)();return(0,u.default)(v+"/users/"+t+"/validity/periodticket",{method:'GET'})},e.logTicketEvent=function(t,n){var s=(0,c.getUserId)(),o=v+"/users/"+s+"/event",f=JSON.stringify({ticketId:t,event:n});return(0,u.default)(o,{method:'POST',body:f}).catch(function(u){return console.log("["+t+"] Error while logging event: "+n)})},e.verifyTicket=function(t){var s=(0,c.getUserId)(),o=v+"/users/"+s+"/verify/"+t,l=JSON.stringify({appTime:(0,n.default)().format(f.SERVER_DATE_FORMAT)});return(0,u.default)(o,{method:'POST',body:l})};var t=l(r(d[0])),n=l(r(d[1])),u=l(r(d[2])),c=r(d[3]),s=r(d[4]),o=l(r(d[5])),f=r(d[6]);function l(t){return t&&t.__esModule?t:{default:t}}var v=t.default.TICKET_SERVICE_URL;function h(t){var n,c,o,f,l,h=arguments;return regeneratorRuntime.async(function(T){for(;;)switch(T.prev=T.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:'ukjent',c=v+"/validationdata",o=t.map(function(t){return t.validationData.token}),f=JSON.stringify({tokens:o,fetchReason:n}),T.prev=4,T.next=7,regeneratorRuntime.awrap((0,u.default)(c,{method:'POST',body:f}));case 7:if((l=T.sent).length){T.next=10;break}throw Error('No validation data returned from server');case 10:return(0,s.saveTicketsWithValidationData)(l),(0,s.removeInvalidValidationData)(),T.abrupt("return",l);case 15:throw T.prev=15,T.t0=T.catch(4),T.t0;case 18:case"end":return T.stop()}},null,null,[[4,15]])}function T(t){var n;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:try{(0,s.saveActiveTicketResponseInCache)(t)}catch(n){console.warn('[fetchActiveTickets] Not saved to cache:',t.map(function(t){return t.ticketId}).join(', '))}return u.prev=1,u.next=4,regeneratorRuntime.awrap((0,o.default)(t));case 4:if(!(n=u.sent).length){u.next=8;break}return u.next=8,regeneratorRuntime.awrap(h(n,'henting av aktive billetter'));case 8:u.next=13;break;case 10:u.prev=10,u.t0=u.catch(1),console.warn('[fetchActiveTickets] Failed to fetch validation data for tickets:',t.map(function(t){return t.ticketId}).join(', '));case 13:case"end":return u.stop()}},null,null,[[1,10]])}},662,[617,628,618,626,663,668,414]);