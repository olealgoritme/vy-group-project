__d(function(g,r,i,a,m,e,d){var t=r(d[0]),n=r(d[1]),o=l(r(d[2])),u=r(d[3]),s=l(r(d[4])),c=l(r(d[5])),p=l(r(d[6]));function l(t){return t&&t.__esModule?t:{default:t}}function f(){return(f=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(t[u]=o[u])}return t}).apply(this,arguments)}function y(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function b(t,n){for(var o=0;o<n.length;o++){var u=n[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&A(t,n)}function A(t,n){return(A=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function D(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,u)}return o}function E(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?D(Object(o),!0).forEach(function(n){P(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):D(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function P(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}var v=r(d[3]).NativeModules.CodePush,O=r(d[7])(v);function k(){var t,n,s,p,l,f,y,b,h,S=arguments;return regeneratorRuntime.async(function(R){for(;;)switch(R.prev=R.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:null,n=S.length>1&&void 0!==S[1]?S[1]:null,R.next=4,regeneratorRuntime.awrap(w());case 4:return s=R.sent,p=t?E({},s,{},{deploymentKey:t}):s,l=T(o.default,p),R.next=9,regeneratorRuntime.awrap(m.exports.getCurrentPackage());case 9:return(f=R.sent)?y=f:(y={appVersion:p.appVersion},"ios"===u.Platform.OS&&p.packageHash&&(y.packageHash=p.packageHash)),R.next=13,regeneratorRuntime.awrap(l.queryUpdateWithCurrentPackage(y));case 13:if(!(!(b=R.sent)||b.updateAppVersion||f&&b.packageHash===f.packageHash||(!f||f._isDebugOnly)&&p.packageHash===b.packageHash)){R.next=19;break}return b&&b.updateAppVersion&&((0,c.default)("An update is available but it is not targeting the binary version of your app."),n&&"function"==typeof n&&n(b)),R.abrupt("return",null);case 19:return h=E({},b,{},O.remote(l.reportStatusDownload)),R.next=22,regeneratorRuntime.awrap(v.isFailedUpdate(h.packageHash));case 22:return h.failedInstall=R.sent,h.deploymentKey=t||s.deploymentKey,R.abrupt("return",h);case 25:case"end":return R.stop()}})}var _,w=function(){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!_){t.next=4;break}return t.abrupt("return",_);case 4:if(!I){t.next=8;break}return t.abrupt("return",I);case 8:return t.next=10,regeneratorRuntime.awrap(v.getConfiguration());case 10:return _=t.sent,t.abrupt("return",_);case 12:case"end":return t.stop()}})};function N(t){var n;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(v.getUpdateMetadata(t||H.UpdateState.RUNNING));case 2:if(!(n=o.sent)){o.next=11;break}return n=E({},O.local,{},n),o.next=7,regeneratorRuntime.awrap(v.isFailedUpdate(n.packageHash));case 7:return n.failedInstall=o.sent,o.next=10,regeneratorRuntime.awrap(v.isFirstRun(n.packageHash));case 10:n.isFirstRun=o.sent;case 11:return o.abrupt("return",n);case 12:case"end":return o.stop()}})}function T(t,n){var o=new m.exports.AcquisitionSdk(t,n);return o.queryUpdateWithCurrentPackage=function(t){return new Promise(function(n,u){m.exports.AcquisitionSdk.prototype.queryUpdateWithCurrentPackage.call(o,t,function(t,o){t?u(t):n(o)})})},o.reportStatusDeploy=function(t,n,u,s){return new Promise(function(c,p){m.exports.AcquisitionSdk.prototype.reportStatusDeploy.call(o,t,n,u,s,function(t){t?p(t):c()})})},o.reportStatusDownload=function(t){return new Promise(function(n,u){m.exports.AcquisitionSdk.prototype.reportStatusDownload.call(o,t,function(t){t?u(t):n()})})},o}var x,I,U=function(){var t;return x||(x=regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(v.notifyApplicationReady());case 2:return n.next=4,regeneratorRuntime.awrap(v.getNewStatusReport());case 4:return(t=n.sent)&&L(t),n.abrupt("return",t);case 7:case"end":return n.stop()}})),x};function L(t,n){var s,p,l,f,y,b;return regeneratorRuntime.async(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,regeneratorRuntime.awrap(w());case 2:if(s=h.sent,p=t.previousLabelOrAppVersion,l=t.previousDeploymentKey||s.deploymentKey,h.prev=5,!t.appVersion){h.next=13;break}return(0,c.default)("Reporting binary update ("+t.appVersion+")"),f=T(o.default,s),h.next=11,regeneratorRuntime.awrap(f.reportStatusDeploy(null,null,p,l));case 11:h.next=25;break;case 13:if(y=t.package.label,"DeploymentSucceeded"!==t.status){h.next=18;break}(0,c.default)("Reporting CodePush update success ("+y+")"),h.next=21;break;case 18:return(0,c.default)("Reporting CodePush update rollback ("+y+")"),h.next=21,regeneratorRuntime.awrap(v.setLatestRollbackInfo(t.package.packageHash));case 21:return s.deploymentKey=t.package.deploymentKey,b=T(o.default,s),h.next=25,regeneratorRuntime.awrap(b.reportStatusDeploy(t.package,t.status,p,l));case 25:v.recordStatusReported(t),n&&u.AppState.removeEventListener("change",n),h.next=34;break;case 29:h.prev=29,h.t0=h.catch(5),(0,c.default)("Report status failed: "+JSON.stringify(t)),v.saveStatusReportForRetry(t),n||(n=function(t){var o;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:if("active"===t){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,regeneratorRuntime.awrap(v.getNewStatusReport());case 4:(o=s.sent)?L(o,n):u.AppState.removeEventListener("change",n);case 6:case"end":return s.stop()}})},u.AppState.addEventListener("change",n));case 34:case"end":return h.stop()}},null,null,[[5,29]])}function C(t,n){var o,u,s,p,l;return regeneratorRuntime.async(function(f){for(;;)switch(f.prev=f.next){case 0:if(o=n.rollbackRetryOptions,t&&t.failedInstall&&n.ignoreFailedUpdates){f.next=4;break}return f.abrupt("return",!1);case 4:if(o){f.next=6;break}return f.abrupt("return",!0);case 6:if(G(o="object"!=typeof o?H.DEFAULT_ROLLBACK_RETRY_OPTIONS:E({},H.DEFAULT_ROLLBACK_RETRY_OPTIONS,{},o))){f.next=9;break}return f.abrupt("return",!0);case 9:return f.next=11,regeneratorRuntime.awrap(v.getLatestRollbackInfo());case 11:if(M(u=f.sent,t.packageHash)){f.next=15;break}return(0,c.default)("The latest rollback info is not valid."),f.abrupt("return",!0);case 15:if(p=(s=o).delayInHours,l=s.maxRetryAttempts,!((Date.now()-u.time)/36e5>=p&&l>=u.count)){f.next=20;break}return(0,c.default)("Previous rollback should be ignored due to rollback retry options."),f.abrupt("return",!1);case 20:return f.abrupt("return",!0);case 21:case"end":return f.stop()}})}function M(t,n){return t&&t.time&&t.count&&t.packageHash&&t.packageHash===n}function G(t){return"number"!=typeof t.delayInHours?((0,c.default)("The 'delayInHours' rollback retry parameter must be a number."),!1):"number"!=typeof t.maxRetryAttempts?((0,c.default)("The 'maxRetryAttempts' rollback retry parameter must be a number."),!1):!(t.maxRetryAttempts<1)||((0,c.default)("The 'maxRetryAttempts' rollback retry parameter cannot be less then 1."),!1)}var F,j,H,K=(F=!1,j=function(){F=!1},function(){var t,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,p=arguments.length>3?arguments[3]:void 0;if("function"==typeof u&&(t=function(){try{u.apply(void 0,arguments)}catch(t){(0,c.default)("An error has occurred : "+t.stack)}}),"function"==typeof s&&(n=function(){try{s.apply(void 0,arguments)}catch(t){(0,c.default)("An error has occurred: "+t.stack)}}),F)return"function"==typeof t?t(H.SyncStatus.SYNC_IN_PROGRESS):(0,c.default)("Sync already in progress."),Promise.resolve(H.SyncStatus.SYNC_IN_PROGRESS);F=!0;var l=q(o,t,n,p);return l.then(j).catch(j),l});function q(){var t,o,u,s,p,l,f,y,b,h,S=arguments;return regeneratorRuntime.async(function(R){for(;;)switch(R.prev=R.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},o=S.length>1?S[1]:void 0,u=S.length>2?S[2]:void 0,s=S.length>3?S[3]:void 0,l=E({deploymentKey:null,ignoreFailedUpdates:!0,rollbackRetryOptions:null,installMode:H.InstallMode.ON_NEXT_RESTART,mandatoryInstallMode:H.InstallMode.IMMEDIATE,minimumBackgroundDuration:0,updateDialog:null},t),o="function"==typeof o?o:function(t){switch(t){case H.SyncStatus.CHECKING_FOR_UPDATE:(0,c.default)("Checking for update.");break;case H.SyncStatus.AWAITING_USER_ACTION:(0,c.default)("Awaiting user action.");break;case H.SyncStatus.DOWNLOADING_PACKAGE:(0,c.default)("Downloading package.");break;case H.SyncStatus.INSTALLING_UPDATE:(0,c.default)("Installing update.");break;case H.SyncStatus.UP_TO_DATE:(0,c.default)("App is up to date.");break;case H.SyncStatus.UPDATE_IGNORED:(0,c.default)("User cancelled the update.");break;case H.SyncStatus.UPDATE_INSTALLED:p==H.InstallMode.ON_NEXT_RESTART?(0,c.default)("Update is installed and will be run on the next app restart."):p==H.InstallMode.ON_NEXT_RESUME&&(l.minimumBackgroundDuration>0?(0,c.default)("Update is installed and will be run after the app has been in the background for at least "+l.minimumBackgroundDuration+" seconds."):(0,c.default)("Update is installed and will be run when the app next resumes."));break;case H.SyncStatus.UNKNOWN_ERROR:(0,c.default)("An unknown error occurred.")}},R.prev=6,R.next=9,regeneratorRuntime.awrap(H.notifyApplicationReady());case 9:return o(H.SyncStatus.CHECKING_FOR_UPDATE),R.next=12,regeneratorRuntime.awrap(k(l.deploymentKey,s));case 12:return f=R.sent,y=function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return o(H.SyncStatus.DOWNLOADING_PACKAGE),n.next=3,regeneratorRuntime.awrap(f.download(u));case 3:return t=n.sent,p=t.isMandatory?l.mandatoryInstallMode:l.installMode,o(H.SyncStatus.INSTALLING_UPDATE),n.next=8,regeneratorRuntime.awrap(t.install(p,l.minimumBackgroundDuration,function(){o(H.SyncStatus.UPDATE_INSTALLED)}));case 8:return n.abrupt("return",H.SyncStatus.UPDATE_INSTALLED);case 9:case"end":return n.stop()}})},R.next=16,regeneratorRuntime.awrap(C(f,l));case 16:if(b=R.sent,f&&!b){R.next=31;break}return b&&(0,c.default)("An update is available, but it is being ignored due to having been previously rolled back."),R.next=21,regeneratorRuntime.awrap(H.getCurrentPackage());case 21:if(!(h=R.sent)||!h.isPending){R.next=27;break}return o(H.SyncStatus.UPDATE_INSTALLED),R.abrupt("return",H.SyncStatus.UPDATE_INSTALLED);case 27:return o(H.SyncStatus.UP_TO_DATE),R.abrupt("return",H.SyncStatus.UP_TO_DATE);case 29:R.next=41;break;case 31:if(!l.updateDialog){R.next=38;break}return"object"!=typeof l.updateDialog?l.updateDialog=H.DEFAULT_UPDATE_DIALOG:l.updateDialog=E({},H.DEFAULT_UPDATE_DIALOG,{},l.updateDialog),R.next=35,regeneratorRuntime.awrap(new Promise(function(t,u){var s=null,c=null,p=[];f.isMandatory?(s=l.updateDialog.mandatoryUpdateMessage,c=l.updateDialog.mandatoryContinueButtonLabel):(s=l.updateDialog.optionalUpdateMessage,c=l.updateDialog.optionalInstallButtonLabel,p.push({text:l.updateDialog.optionalIgnoreButtonLabel,onPress:function(){o(H.SyncStatus.UPDATE_IGNORED),t(H.SyncStatus.UPDATE_IGNORED)}})),p.push({text:c,onPress:function(){y().then(t,u)}}),l.updateDialog.appendReleaseDescription&&f.description&&(s+=l.updateDialog.descriptionPrefix+" "+f.description),o(H.SyncStatus.AWAITING_USER_ACTION),n.Alert.alert(l.updateDialog.title,s,p)}));case 35:return R.abrupt("return",R.sent);case 38:return R.next=40,regeneratorRuntime.awrap(y());case 40:return R.abrupt("return",R.sent);case 41:R.next=48;break;case 43:throw R.prev=43,R.t0=R.catch(6),o(H.SyncStatus.UNKNOWN_ERROR),(0,c.default)(R.t0.message),R.t0;case 48:case"end":return R.stop()}},null,null,[[6,43]])}v?f(H=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r(d[3]);try{t=r(d[8])}catch(t){}if(!t){try{t=o.React}catch(t){}if(!t)throw new Error("Unable to find the 'React' module.")}if(!t.Component)throw new Error("Unable to find the \"Component\" class, please either:\n1. Upgrade to a newer version of React Native that supports it, or\n2. Call the codePush.sync API in your component instead of using the @codePush decorator");var u=function(u){var s=(function(s){function c(){return y(this,c),t=this,!(n=S(c).apply(this,arguments))||"object"!=typeof n&&"function"!=typeof n?h(t):n;var t,n}var p,l,f;return R(c,t.Component),p=c,(l=[{key:"componentDidMount",value:function(){if(n.checkFrequency===H.CheckFrequency.MANUAL)H.notifyAppReady();else{var u,s,c,p=this.refs.rootComponent;p&&p.codePushStatusDidChange&&(u=p.codePushStatusDidChange,p instanceof t.Component&&(u=u.bind(p))),p&&p.codePushDownloadDidProgress&&(s=p.codePushDownloadDidProgress,p instanceof t.Component&&(s=s.bind(p))),p&&p.codePushOnBinaryVersionMismatch&&(c=p.codePushOnBinaryVersionMismatch,p instanceof t.Component&&(c=c.bind(p))),H.sync(n,u,s,c),n.checkFrequency===H.CheckFrequency.ON_APP_RESUME&&o.AppState.addEventListener("change",function(t){"active"===t&&H.sync(n,u,s)})}}},{key:"render",value:function(){var n=E({},this.props);return u.prototype.render&&(n.ref="rootComponent"),t.createElement(u,n)}}])&&b(p.prototype,l),f&&b(p,f),c})();return(0,p.default)(s,u)};return"function"==typeof n?u(n):u},{AcquisitionSdk:t.AcquisitionManager,checkForUpdate:k,getConfiguration:w,getCurrentPackage:function(){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(N(H.UpdateState.LATEST));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}})},getUpdateMetadata:N,log:c.default,notifyAppReady:U,notifyApplicationReady:U,restartApp:s.default.restartApp,setUpTestDependencies:function(t,n,o){t&&(m.exports.AcquisitionSdk=t),n&&(I=n),o&&(v=o)},sync:K,disallowRestart:s.default.disallow,allowRestart:s.default.allow,clearUpdates:v.clearUpdates,InstallMode:{IMMEDIATE:v.codePushInstallModeImmediate,ON_NEXT_RESTART:v.codePushInstallModeOnNextRestart,ON_NEXT_RESUME:v.codePushInstallModeOnNextResume,ON_NEXT_SUSPEND:v.codePushInstallModeOnNextSuspend},SyncStatus:{UP_TO_DATE:0,UPDATE_INSTALLED:1,UPDATE_IGNORED:2,UNKNOWN_ERROR:3,SYNC_IN_PROGRESS:4,CHECKING_FOR_UPDATE:5,AWAITING_USER_ACTION:6,DOWNLOADING_PACKAGE:7,INSTALLING_UPDATE:8},CheckFrequency:{ON_APP_START:0,ON_APP_RESUME:1,MANUAL:2},UpdateState:{RUNNING:v.codePushUpdateStateRunning,PENDING:v.codePushUpdateStatePending,LATEST:v.codePushUpdateStateLatest},DeploymentStatus:{FAILED:"DeploymentFailed",SUCCEEDED:"DeploymentSucceeded"},DEFAULT_UPDATE_DIALOG:{appendReleaseDescription:!1,descriptionPrefix:" Description: ",mandatoryContinueButtonLabel:"Continue",mandatoryUpdateMessage:"An update is available that must be installed.",optionalIgnoreButtonLabel:"Ignore",optionalInstallButtonLabel:"Install",optionalUpdateMessage:"An update is available. Would you like to install it?",title:"Update available"},DEFAULT_ROLLBACK_RETRY_OPTIONS:{delayInHours:24,maxRetryAttempts:1}}):(0,c.default)("The CodePush module doesn't appear to be properly installed. Please double-check that everything is setup correctly."),m.exports=H},406,[407,408,409,10,411,412,369,413,7]);