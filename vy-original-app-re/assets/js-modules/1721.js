__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=_(r(d[0])),n=r(d[1]),o=r(d[2]),u=r(d[3]),s=r(d[4]),c=r(d[5]),l=r(d[6]),f=r(d[7]),p=r(d[8]),y=_(r(d[9])),S=P(r(d[10])),b=P(r(d[11])),h=P(r(d[12])),v=P(r(d[13])),w=P(r(d[14])),O=P(r(d[15]));function P(t){return t&&t.__esModule?t:{default:t}}function R(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return R=function(){return t},t}function _(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=R();if(n&&n.has(t))return n.get(t);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var c=u?Object.getOwnPropertyDescriptor(t,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=t[s]}return o.default=t,n&&n.set(t,o),o}function x(t,n){return A(t)||E(t,n)||I()}function I(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function E(t,n){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],u=!0,s=!1,c=void 0;try{for(var l,f=t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(u=(l=f.next()).done)&&(o.push(l.value),!n||o.length!==n);u=!0);}catch(t){s=!0,c=t}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}return o}}function A(t){if(Array.isArray(t))return t}var M=function(t){var n;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap((0,f.authenticateForHotToken)((0,v.default)('biometrics_authentication_reason')+(t?' '+(0,v.default)('of')+' '+(0,c.getAmountFromOereWithCurrency)(t):'')));case 2:return(n=o.sent).error&&console.warn(n.error),o.abrupt("return",n);case 5:case"end":return o.stop()}})},T=function(c){var f=x((0,t.useState)(!1),2),P=f[0],R=f[1],_=x((0,t.useState)(!1),2),I=_[0],E=_[1],A=x((0,t.useState)(c.order),2),T=A[0],k=A[1],N=x((0,t.useState)(0),2),C=N[0],D=N[1],j=x((0,t.useState)((0,u.getPaymentMethodsFromOrder)(c.order)),2),B=j[0],L=j[1];(0,t.useEffect)(function(){F(c.order.id)},[]);var F=function(t){var s,f;return regeneratorRuntime.async(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,c.onSetStatus({type:'LOADING'}),p.next=4,regeneratorRuntime.awrap((0,o.getOrder)(t));case 4:s=p.sent,k(s),L((0,u.getPaymentMethodsFromOrder)(s)),n.LayoutAnimation.configureNext(n.LayoutAnimation.Presets.easeInEaseOut),c.onSetStatus({type:'INITIATED'}),p.next=15;break;case 11:p.prev=11,p.t0=p.catch(0),f=(0,l.getMessageFromErrorIfPresent)(p.t0)||(0,v.default)('get_order_failed_generic_message'),c.onSetStatus({type:'ERROR',message:f});case 15:case"end":return p.stop()}},null,null,[[0,11]])},G=function(){var t,n;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,regeneratorRuntime.awrap((0,o.initiatePaymentWithNewPaymentCard)(T.id,T.user,P));case 2:t=u.sent,n=t.url,c.navigateToNetsTerminal(T,n);case 5:case"end":return u.stop()}})},W=function(t,n){return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,regeneratorRuntime.awrap((0,o.initiatePaymentWithStoredPaymentCard)(T.id,t.id,T.user,n));case 2:c.navigateToReceipt(T,t.cardAssociation);case 3:case"end":return u.stop()}})},H=T.itineraries.length&&T.itineraries[0],V=H&&H.selectedPriceOption;return t.default.createElement(t.default.Fragment,null,t.default.createElement(s.HeaderCard,null,t.default.createElement(h.default,{showCloseButton:!0,onBackPress:c.goBack,isLoading:'LOADING'===c.status.type,headerText:(0,v.default)('order_confirmation')})),t.default.createElement(n.ScrollView,{style:{backgroundColor:p.colors.brightGrey},contentContainerStyle:{justifyContent:'space-between',paddingBottom:100}},H&&V&&t.default.createElement(O.default,{priceOption:V,itinerary:H,order:T,onSetOrder:k,status:c.status,onSetStatus:c.onSetStatus}),t.default.createElement(n.View,{style:{paddingHorizontal:24,marginBottom:6}},'TURNIT'===T.origin?t.default.createElement(S.default,null):t.default.createElement(b.default,null)),t.default.createElement(w.default,{status:c.status,onSetStatus:c.onSetStatus,selectedPaymentMethodIndex:C,setSelectedPaymentMethodIndex:D,storeNewPaymentCard:P,setStoreNewPaymentCard:R,paymentMethods:B,deletePaymentMethod:function(t){L(B.filter(function(n){return n.id!==t}))},setIsNewCard:E})),'ERROR'===c.status.type&&t.default.createElement(y.default,{animated:!0,style:{marginBottom:24,marginHorizontal:24,position:'absolute',bottom:0},message:(0,y.warnMessage)(c.status.message)}),t.default.createElement(s.ModalBottomButton,{showShadow:!0,onPress:function(){var t,n,o,s,f,p;return regeneratorRuntime.async(function(y){for(;;)switch(y.prev=y.next){case 0:if(c.onSetStatus({type:'LOADING'}),t=B[C],n=T.itineraries[0]&&T.itineraries[0].selectedPriceOption&&T.itineraries[0].selectedPriceOption.amountInOere,y.prev=3,!(0,u.isStoredCardPaymentMethod)(t)){y.next=18;break}return y.next=7,regeneratorRuntime.awrap(M(n));case 7:if(o=y.sent,s=o.authenticated,f=o.hotToken,!s){y.next=15;break}return y.next=13,regeneratorRuntime.awrap(W(t,f));case 13:y.next=16;break;case 15:return y.abrupt("return",c.onSetStatus({type:'ERROR',message:(0,v.default)('prepare_payment_failed_generic_message')}));case 16:y.next=26;break;case 18:y.t0=t.paymentType,y.next='CARD'===y.t0?21:'VIPPS'===y.t0?24:26;break;case 21:return y.next=23,regeneratorRuntime.awrap(G());case 23:return y.abrupt("break",26);case 24:return c.navigateToVippsPayment(T),y.abrupt("break",26);case 26:c.onSetStatus({type:'INITIATED'}),y.next=33;break;case 29:y.prev=29,y.t1=y.catch(3),p=(0,l.getMessageFromErrorIfPresent)(y.t1)||(0,v.default)('prepare_payment_failed_generic_message'),c.onSetStatus({type:'ERROR',message:p});case 33:case"end":return y.stop()}},null,null,[[3,29]])},disabled:'LOADING'===c.status.type||'ADMINISTRATING_CARDS'===c.status.type,text:(0,v.default)(I?'continue_to_add_card':'buy_order'),loading:'LOADING'===c.status.type}))};e.default=T},1721,[7,10,642,1722,653,1236,636,632,414,1487,1723,1724,1715,1234,1725,1733]);