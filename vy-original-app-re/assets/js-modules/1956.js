__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=I(r(d[0])),n=r(d[1]),o=I(r(d[2])),l=r(d[3]),u=w(r(d[4])),c=r(d[5]),s=r(d[6]),f=r(d[7]),E=w(r(d[8])),p=w(r(d[9])),h=w(r(d[10])),_=r(d[11]),O=w(r(d[12])),S=w(r(d[13])),y=w(r(d[14])),v=w(r(d[15])),P=w(r(d[16])),C=w(r(d[17])),F=w(r(d[18]));function w(t){return t&&t.__esModule?t:{default:t}}function b(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return b=function(){return t},t}function I(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=b();if(n&&n.has(t))return n.get(t);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var c=l?Object.getOwnPropertyDescriptor(t,u):null;c&&(c.get||c.set)?Object.defineProperty(o,u,c):o[u]=t[u]}return o.default=t,n&&n.set(t,o),o}function R(t,n){return T(t)||N(t,n)||D()}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function N(t,n){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],l=!0,u=!1,c=void 0;try{for(var s,f=t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(l=(s=f.next()).done)&&(o.push(s.value),!n||o.length!==n);l=!0);}catch(t){u=!0,c=t}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return o}}function T(t){if(Array.isArray(t))return t}function G(t){var n,o,u,c;return regeneratorRuntime.async(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,n=R(t.position,2),o=n[0],u=n[1],c=(0,l.encode)(t.href),f.next=5,regeneratorRuntime.awrap((0,s.fetchAddress)(o.toString(),u.toString(),c));case 5:return f.abrupt("return",f.sent);case 8:return f.prev=8,f.t0=f.catch(0),console.log('Error:',f.t0),f.abrupt("return");case 12:case"end":return f.stop()}},null,null,[[0,8]])}var x=n.StyleSheet.create({bottomCard:{backgroundColor:'white',position:'absolute',bottom:0,width:'100%',padding:20,paddingBottom:40},icon:{position:'absolute',alignSelf:'flex-end',marginTop:60,paddingRight:30},wrapper:{margin:24,paddingTop:26,marginTop:100},mapCenterMarker:{position:'absolute',bottom:0,right:0,left:0,top:0,justifyContent:'center',alignItems:'center'}}),L=function(l){var w=R((0,t.useState)('SELECTING_DROP_OFF'),2),b=w[0],I=w[1],D=R((0,t.useState)(!1),2),N=D[0],T=D[1],L=R((0,t.useState)(!1),2),k=L[0],j=L[1],H=R((0,t.useState)(),2),M=H[0],W=H[1],V=R((0,t.useState)(),2),A=V[0],K=V[1],U=R((0,t.useState)(),2),B=U[0],z=U[1],q=R((0,t.useState)(),2),J=q[0],Q=q[1],X=R((0,t.useState)(),2),Y=X[0],Z=X[1],$=R((0,t.useState)(!1),2),ee=$[0],te=$[1],ne=(0,c.useLocation)(),re=(0,t.useRef)(null),ae=R((0,t.useState)(!1),2),oe=ae[0],le=ae[1],ue=R((0,t.useState)([]),2),ie=ue[0],de=ue[1],ce=R((0,t.useState)(!1),2),se=ce[0],fe=ce[1];(0,t.useEffect)(function(){var t;'success'==ne.status&&(null==(t=re.current)||t.animateCamera({center:ne.location,zoom:17},{duration:2e3}))},[ne]),(0,t.useEffect)(function(){var t;'SHOWING_PICK_UP_AND_DROP_OFF'==b&&M&&A&&(null==(t=re.current)||t.fitToCoordinates([{latitude:M.latitude,longitude:M.longitude},{latitude:A.latitude,longitude:A.longitude}],{edgePadding:{top:48,right:48,bottom:300,left:48},animated:!0}))},[b]);var me=function(t){var n,o;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:if('success'!==ne.status){l.next=6;break}return n=ne.location,l.next=4,regeneratorRuntime.awrap((0,s.fetchPlaces)([n.latitude,n.longitude],t.replace(/\s+/g,'')));case 4:return o=l.sent,l.abrupt("return",o);case 6:return l.abrupt("return");case 7:case"end":return l.stop()}})};function ge(t){var n;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return z(t),o.next=3,regeneratorRuntime.awrap(me(t));case 3:n=o.sent,Q(n);case 5:case"end":return o.stop()}})}return t.default.createElement(t.default.Fragment,null,t.default.createElement(o.default,{ref:re,onPress:function(){T(!1)},style:{flex:1},provider:o.PROVIDER_GOOGLE,showsUserLocation:!0,showsMyLocationButton:!1,toolbarEnabled:!1,showsCompass:!1,initialCamera:{center:{latitude:59.9131026,longitude:10.7398053},pitch:0,heading:0,altitude:0,zoom:8},onPanDrag:function(){'SHOWING_OFFERS'!=b&&le(!0)},onRegionChange:function(){j(!0)},onRegionChangeComplete:function(t){var n,o;'SHOWING_OFFERS'!=b&&'SHOWING_PICK_UP_AND_DROP_OFF'!=b&&(n={latitude:t.latitude,longitude:t.longitude},regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!oe){t.next=19;break}return j(!0),Z(n),t.prev=3,t.next=6,regeneratorRuntime.awrap((0,s.fetchAddressFromLatLng)(n.latitude.toString(),n.longitude.toString()));case 6:o=t.sent,'SELECTING_DROP_OFF'==b?K(o):W(o),te(!1),z(o.street+" "+o.houseNumber),j(!1),t.next=19;break;case 13:t.prev=13,t.t0=t.catch(3),'SELECTING_DROP_OFF'==b?K(void 0):W(void 0),z(void 0),j(!1),Z(void 0);case 19:j(!1);case 20:case"end":return t.stop()}},null,null,[[3,13]]))}},'SELECTING_DROP_OFF'==b&&A&&!k&&Y&&t.default.createElement(t.default.Fragment,null,t.default.createElement(o.Marker,{coordinate:{latitude:A.latitude,longitude:A.longitude}},t.default.createElement(O.default,{height:10,width:10})),t.default.createElement(o.Polyline,{lineDashPattern:[2,2],strokeWidth:5,strokeColor:v.default.orange,coordinates:[Y,A]})),'SELECTING_PICK_UP'==b&&M&&!k&&Y&&t.default.createElement(t.default.Fragment,null,t.default.createElement(o.Marker,{coordinate:{latitude:M.latitude,longitude:M.longitude}},t.default.createElement(y.default,{height:10,width:10})),t.default.createElement(o.Polyline,{lineDashPattern:[2,2],strokeWidth:5,strokeColor:v.default.actionGreen,coordinates:[Y,M]})),('SHOWING_OFFERS'==b||'SHOWING_PICK_UP_AND_DROP_OFF'==b)&&M&&A&&t.default.createElement(t.default.Fragment,null,t.default.createElement(o.Marker,{coordinate:{latitude:M.latitude,longitude:M.longitude}},t.default.createElement(y.default,{height:30,width:30})),t.default.createElement(o.Marker,{coordinate:{latitude:A.latitude,longitude:A.longitude}},t.default.createElement(O.default,{height:30,width:30})))),('SELECTING_PICK_UP'==b||'SELECTING_DROP_OFF'==b)&&t.default.createElement(t.default.Fragment,null,t.default.createElement(n.View,{pointerEvents:"none",style:x.mapCenterMarker},'SELECTING_DROP_OFF'==b?t.default.createElement(O.default,{height:30,width:30}):t.default.createElement(y.default,{height:30,width:30})),t.default.createElement(n.View,{style:[x.bottomCard,{height:N?'100%':'auto'}]},t.default.createElement(f.MediumTextBold,{style:{marginBottom:12}},'SELECTING_DROP_OFF'==b?'Hvor vil du reise til?':'Hvor vil du reise fra?'),t.default.createElement(p.default,{onFocus:function(){T(!0)},value:B,onChangeText:ge,placeholder:'SELECTING_DROP_OFF'==b?'Hvor vil du reise til?':'Hvor vil du reise fra?',icon:'SELECTING_DROP_OFF'==b?O.default:y.default,editable:N,onPress:function(){T(!0),B&&ge(B)}}),!N&&t.default.createElement(E.default,{onPress:function(){var t,n;'SELECTING_DROP_OFF'==b?A?M?(j(!0),z(M.street+" "+M.houseNumber),I('SELECTING_PICK_UP'),null==(t=re.current)||t.animateCamera({center:{latitude:M.latitude,longitude:M.longitude},zoom:17})):(z(void 0),I('SELECTING_PICK_UP'),'success'==ne.status&&(null==(n=re.current)||n.animateCamera({center:ne.location,zoom:17}))):te(!0):A&&M?I('SHOWING_PICK_UP_AND_DROP_OFF'):te(!0)}},'SELECTING_DROP_OFF'==b?'Neste':'Videre'),ee&&t.default.createElement(f.SmallTextBold,{style:{paddingTop:18}},"Du m\xe5 velge adresse f\xf8r du kan g\xe5 videre"),J&&N&&t.default.createElement(h.default,{suggestions:J,onSelectSuggestion:function(t){var o,l;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,regeneratorRuntime.awrap(G(t));case 2:o=u.sent,P.default.checkIfValidAddress(o)&&('SELECTING_DROP_OFF'==b?K(o):W(o),te(!1),T(!1),Q(null),o&&(null==(l=re.current)||l.animateCamera({center:{latitude:o.latitude,longitude:o.longitude}}),n.Keyboard.dismiss()));case 4:case"end":return u.stop()}})}}))),'SHOWING_PICK_UP_AND_DROP_OFF'==b&&A&&M&&t.default.createElement(n.View,{style:[x.bottomCard,{height:N?'100%':'auto'}]},t.default.createElement(n.View,{style:{flexDirection:'row',justifyContent:'space-between'}},t.default.createElement(n.View,{style:{marginBottom:24}},t.default.createElement(n.View,{style:{flexDirection:'row'}},t.default.createElement(y.default,{width:18,height:18,style:{marginTop:3}}),t.default.createElement(F.default,{address:M,style:{marginLeft:12}}),t.default.createElement(f.SmallText,{mediumGrey:!0,style:{paddingLeft:18,textDecorationLine:'underline'},onPress:function(){var t;null==(t=re.current)||t.animateCamera({center:M}),I('SELECTING_PICK_UP')}},"Endre")),t.default.createElement(n.Image,{source:_.groupDottes,style:{marginLeft:6,marginBottom:10,marginTop:-10}}),t.default.createElement(n.View,{style:{flexDirection:'row'}},t.default.createElement(O.default,{width:18,height:18,style:{marginTop:3}}),t.default.createElement(F.default,{address:A,style:{marginLeft:12}}),t.default.createElement(f.SmallText,{mediumGrey:!0,style:{paddingLeft:18,textDecorationLine:'underline'},onPress:function(){var t;null==(t=re.current)||t.animateCamera({center:A}),I('SELECTING_DROP_OFF')}},"Endre"))),t.default.createElement(n.TouchableOpacity,{onPress:function(){var t=M;W(A),K(t)},style:{justifyContent:'center'},accessibilityRole:"button"},t.default.createElement(n.Image,{source:_.switchVertical,resizeMode:'contain',style:{height:44}}))),t.default.createElement(E.default,{onPress:function(){var t;regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(!M||!A){o.next=13;break}return fe(!0),o.prev=2,o.next=5,regeneratorRuntime.awrap((0,s.postPriceRequest)({from:M,to:A},(0,u.default)().utc()));case 5:t=o.sent,de(t),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(2),n.Alert.alert('Vi klarte dessverre ikke \xe5 hente ut noen tilbud. Sjekk om adressene er riktig og pr\xf8v igjen.');case 12:fe(!1);case 13:case"end":return o.stop()}},null,null,[[2,9]]),I('SHOWING_OFFERS')}},"Se priser og velg taxi")),'SHOWING_OFFERS'==b&&t.default.createElement(n.View,{style:{paddingBottom:24}},t.default.createElement(C.default,{offers:ie,onPress:function(t){l.navigation.navigate({routeName:'TaxiConfirmationScreen',params:{route:{from:M,to:A},offer:t}})},isLoading:se})),t.default.createElement(S.default,{icon:_.closeDarkBackground,style:{borderRadius:20,shadowOpacity:0},positionStyle:x.icon,onPress:function(){return l.navigation.goBack(null)}}))};e.default=L},1956,[7,10,1936,1957,628,1384,1457,653,986,1958,1959,675,1931,1929,1930,415,1960,1961,1933]);