__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=_();if(n&&n.has(t))return n.get(t);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var s=u?Object.getOwnPropertyDescriptor(t,l):null;s&&(s.get||s.set)?Object.defineProperty(o,l,s):o[l]=t[l]}o.default=t,n&&n.set(t,o);return o})(r(d[0])),n=r(d[1]),o=r(d[2]),u=r(d[3]),l=r(d[4]),s=r(d[5]),c=r(d[6]),p=r(d[7]),f=r(d[8]),y=r(d[9]),b=r(d[10]),v=j(r(d[11])),S=j(r(d[12])),O=j(r(d[13])),w=j(r(d[14])),h=r(d[15]);function j(t){return t&&t.__esModule?t:{default:t}}function _(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return _=function(){return t},t}function k(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,u)}return o}function x(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?k(Object(o),!0).forEach(function(n){E(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):k(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function E(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function P(t,n){return D(t)||B(t,n)||M()}function M(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function B(t,n){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],u=!0,l=!1,s=void 0;try{for(var c,p=t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(u=(c=p.next()).done)&&(o.push(c.value),!n||o.length!==n);u=!0);}catch(t){l=!0,s=t}finally{try{u||null==p.return||p.return()}finally{if(l)throw s}}return o}}function D(t){if(Array.isArray(t))return t}var T=n.StyleSheet.create({scrollView:{paddingTop:30,paddingBottom:100,flexGrow:1,justifyContent:'space-between'},tripStatusMessage:{paddingHorizontal:20,paddingVertical:20,marginHorizontal:0,marginBottom:24,backgroundColor:b.colors.lightYellow}});var I=function(n){var o=n.passengerSummary,s=n.isBookable,c=n.price,p=c?(0,l.getAmountFromOereWithCurrency)(c):'';return t.createElement(t.Fragment,null,t.createElement(u.SmallText,null,o),s&&t.createElement(u.SmallTextBold,{style:{color:b.colors.actionGreen}},(0,w.default)('from')+" "+p))},A=(0,y.withLoginState)(function(l){var y=P((0,t.useState)(),2),j=y[0],_=y[1],k=P((0,t.useState)(!1),2),E=k[0],M=k[1];function B(){var t,o;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,M(!0),u.next=4,regeneratorRuntime.awrap((0,p.createOrder)(A.turnitJourneyId,A.priceOptions[0].type));case 4:return t=u.sent,o=t.id,u.next=8,regeneratorRuntime.awrap((0,p.getOrder)(o));case 8:return u.abrupt("return",u.sent);case 11:u.prev=11,u.t0=u.catch(0),n.Alert.alert((0,w.default)('order_or_payment_failed_alert_title'),(0,c.getMessageFromErrorIfPresent)(u.t0)||(0,w.default)('initiate_order_failed_generic_message'));case 14:return u.prev=14,M(!1),u.finish(14);case 17:case"end":return u.stop()}},null,null,[[0,11,14,17]])}(0,t.useEffect)(function(){var t,o;regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,t=l.navigation.state.params.itinerary,u.next=4,regeneratorRuntime.awrap((0,p.fetchBusItinerary)(t.turnitJourneyId));case 4:o=u.sent,_(o),u.next=12;break;case 8:u.prev=8,u.t0=u.catch(0),console.warn(u.t0),n.Alert.alert((0,w.default)('order_or_payment_failed_alert_title'),(0,c.getMessageFromErrorIfPresent)(u.t0)||(0,w.default)('refresh_failed'),[{onPress:function(){l.navigation.goBack(null)}}]);case 12:case"end":return u.stop()}},null,null,[[0,8]])},[]);var D=l.navigation.state.params,A=D.itinerary,R=D.walkingDurationToDepartureStationSeconds,V=D.adjacentDepartureTrainStationName,C=D.passengerSummary,L=A.tripStatus.bookable,F=(0,f.renderDuration)(A.duration),W=A.priceOptions.filter(function(t){return t.bookable})[0],z=l.navigation.state.params,G=z.from,N=z.to;return t.createElement(u.ScreenView,{style:{backgroundColor:b.colors.brightGrey}},t.createElement(n.View,{style:{zIndex:10,backgroundColor:b.colors.white}},t.createElement(v.default,{legs:j&&j.legs,durationString:F})),t.createElement(n.ScrollView,{contentContainerStyle:T.scrollView},!!A.tripStatus.shortMessage&&t.createElement(n.View,{style:T.tripStatusMessage},t.createElement(u.MediumTextBold,{style:{marginBottom:5}},A.tripStatus.shortMessage),t.createElement(u.MediumText,null,A.tripStatus.longMessage)),!!j&&t.createElement(S.default,{legs:j.legs||[],busTrackingString:G.name+" \u2013 "+N.name,walkingLegToDepartureStationString:(0,s.getWalkingLegDurationAsString)(R,V),itinerary:l.navigation.state.params.itinerary})),t.createElement(O.default,{isLoading:E,text:(0,w.default)(L?'go_further':'close'),onPress:function(){var t,n,u,s,c,p;return regeneratorRuntime.async(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=l.navigation.state.params,n=t.itinerary,u=t.previousStack,s=t.passengerSummary,c=1===n.priceOptions.length&&n.useNewBusApi&&l.loginState.isLoggedIn,n.tripStatus.bookable){f.next=6;break}l.navigation.goBack(null),f.next=14;break;case 6:if(!c){f.next=13;break}return f.next=9,regeneratorRuntime.awrap(B());case 9:p=f.sent,l.navigation.dispatch((0,h.navigateToNextBusOrderScreen)(p,u,s)),f.next=14;break;case 13:l.navigation.dispatch((0,o.navigateToScreen)(x({},l.navigation.state.params)));case 14:case"end":return f.stop()}})}},t.createElement(I,{isBookable:L,passengerSummary:C,price:W&&W.amountInOere})))});e.default=A},1871,[7,10,1872,653,1236,1233,636,642,670,637,414,1875,1878,1741,1234,1701]);