__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=v();if(n&&n.has(t))return n.get(t);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var s=l?Object.getOwnPropertyDescriptor(t,u):null;s&&(s.get||s.set)?Object.defineProperty(o,u,s):o[u]=t[u]}o.default=t,n&&n.set(t,o);return o})(r(d[0])),n=p(r(d[1])),o=r(d[2]),l=r(d[3]),u=p(r(d[4])),s=p(r(d[5])),f=p(r(d[6])),c=p(r(d[7])),y=r(d[8]),b=r(d[9]);function p(t){return t&&t.__esModule?t:{default:t}}function v(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return v=function(){return t},t}function _(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function h(t,n){for(var o=0;o<n.length;o++){var l=n[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&E(t,n)}function E(t,n){return(E=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var j=(function(s){function p(t){var n,o,l;return _(this,p),o=this,(n=!(l=w(p).call(this,t))||"object"!=typeof l&&"function"!=typeof l?O(o):l).state={showSeatChooserModal:!1,selectedLeg:null},n.closeSeatChooser=n.closeSeatChooser.bind(O(n)),n.onReserveSeat=n.onReserveSeat.bind(O(n)),n}var v,E,j;return S(p,t.Component),v=p,(E=[{key:"onReserveSeat",value:function(t){var n=this;this.setState({selectedLeg:{leg:t,itinerary:this.props.itinerary}},function(){return n.props.navigateToSeatMap(t,n.props.itinerary)})}},{key:"closeSeatChooser",value:function(){this.setState({showSeatChooserModal:!1})}},{key:"render",value:function(){var s=this,p=this.props,v=p.itinerary,_=p.onCancelReservation;return t.default.createElement(o.View,{style:f.default.seatBookingContainer},v.legs.map(function(p,h){var w=h===v.legs.length-1,O=(0,c.default)('reserve_seat')+" "+(0,c.default)('from')+" "+p.trainJourney.departureStation.name+" "+(0,c.default)('to')+" "+p.trainJourney.arrivalStation.name,S=(0,n.default)(p.departureScheduled).isBefore((0,n.default)()),E=!!p.reservation;return t.default.createElement(o.View,{key:p.from+h,style:f.default.seatBookingLegContainer},t.default.createElement(P,{leg:p,isLastLeg:w}),p.bookable&&!E&&t.default.createElement(u.default,{onPress:function(){return s.onReserveSeat(p)},children:(0,c.default)('reserve_seat'),accessibilityLabel:O,icon:y.seatActionGreen}),E&&!S&&t.default.createElement(l.DestructiveButton,{text:(0,c.default)('cancel_reservation'),accessibilityLabel:(0,c.default)('cancel_reservation_accessibility_label_for_single_leg'),onPress:function(){return _(v.journeyReservationId,p.trainJourney.identifier)}}),E&&S&&t.default.createElement(o.View,{style:{width:150},accessible:!0},t.default.createElement(b.SmallText,{mediumGrey:!0,style:{marginLeft:12}},(0,c.default)('not_cancelable_seat_reservation'))))}))}}])&&h(v.prototype,E),j&&h(v,j),p})();function k(t){return(0,c.default)('WALK'===t.transportType?'walking_leg':'free_seating')}function L(t){return(0,c.default)('from')+" "+t.from+" "+(0,c.default)('to')+" "+t.to+". "+" "+(t.reservation?(0,c.default)('your_seat_is')+": "+(0,c.default)('carriage')+" "+(0,c.default)('number')+" "+t.reservation.railcarId+" "+(0,c.default)('seat')+" "+(0,c.default)('number')+" "+t.reservation.seatNumber:t.bookable?(0,c.default)('you_have_not_booked_a_seat'):k(t))}var P=function(n){var u,c,y=n.leg,b=n.isLastLeg,p=t.default.createElement(s.default,{carNumber:null==(u=y.reservation)?void 0:u.railcarId,seatNumbers:[null==(c=y.reservation)?void 0:c.seatNumber],faded:!y.reservation&&!y.bookable});return t.default.createElement(o.View,{style:{flex:1},accessibilityLabel:L(y),accessible:!0},t.default.createElement(l.MediumTextBold,null,y.from+" \u2013 "+y.to),y.bookable||y.reservation?t.default.createElement(o.View,{style:f.default.seatAndCarriageIcon},p):t.default.createElement(l.MediumText,{mediumGrey:!0,style:{marginVertical:6}},k(y)),!b&&t.default.createElement(l.GreyLine,{style:{marginVertical:12,width:'100%'}}))},C=j;e.default=C},1758,[7,630,10,653,961,1286,1218,673,675,962]);