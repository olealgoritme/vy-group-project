__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=T();if(n&&n.has(t))return n.get(t);var o={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var s=c?Object.getOwnPropertyDescriptor(t,u):null;s&&(s.get||s.set)?Object.defineProperty(o,u,s):o[u]=t[u]}o.default=t,n&&n.set(t,o);return o})(r(d[0])),n=r(d[1]),o=P(r(d[2])),c=r(d[3]),u=r(d[4]),s=P(r(d[5])),l=r(d[6]),f=P(r(d[7])),p=P(r(d[8])),y=P(r(d[9])),h=P(r(d[10])),b=r(d[11]),v=P(r(d[12])),S=r(d[13]);function P(t){return t&&t.__esModule?t:{default:t}}function T(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return T=function(){return t},t}function E(t){return k(t)||_(t)||O()}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _(t){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function k(t){if(Array.isArray(t)){for(var n=0,o=new Array(t.length);n<t.length;n++)o[n]=t[n];return o}}function w(t,n){return R(t)||A(t,n)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function A(t,n){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],c=!0,u=!1,s=void 0;try{for(var l,f=t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(c=(l=f.next()).done)&&(o.push(l.value),!n||o.length!==n);c=!0);}catch(t){u=!0,s=t}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}return o}}function R(t){if(Array.isArray(t))return t}function j(n){switch(n.itineraryState.type){case'initial-loading':return t.default.createElement(l.ActivityIndicator,null);case'has-itineraries':case'fetching-later-error':case'fetching-later':return t.default.createElement(o.default,{from:n.from,to:n.to,itineraries:n.itineraryState.itineraries,onBuyTicket:n.onBuyTicket,isFetchingLaterItineraries:'fetching-later'===n.itineraryState.type,onFetchLaterItineraries:n.onFetchLaterItineraries,onFeedbackPressed:n.onFeedbackPressed});case'initial-error':return t.default.createElement(l.MessageBox,{style:{marginTop:12},level:"error",message:(0,f.default)('fetch_itineraries_error')})}}var F=function(o){var l=w((0,t.useState)(!1),2),P=l[0],T=l[1],O=w((0,t.useState)(!1),2),_=O[0],k=O[1],x=w((0,t.useState)(o.from),2),A=x[0],R=x[1],F=w((0,t.useState)(o.to),2),I=F[0],D=F[1],B=w((0,t.useState)(o.selectedTime),2),M=B[0],C=B[1],L=w((0,t.useState)(o.passengers),2),V=L[0],H=L[1],N=w((0,t.useState)({type:'initial-loading'}),2),W=N[0],G=N[1];function U(t){var n,o;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return n=(0,u.getPositionOfPlace)(A),o=(0,u.getPositionOfPlace)(I),s.next=4,regeneratorRuntime.awrap((0,c.fetchItinerariesFromAPI)(n,o,t));case 4:return s.abrupt("return",s.sent);case 5:case"end":return s.stop()}})}return(0,t.useEffect)(function(){!(function(t){var n;regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return G({type:'initial-loading'}),o.prev=1,o.next=4,regeneratorRuntime.awrap(U(t));case 4:n=o.sent,G({type:'has-itineraries',itineraries:n.suggestions}),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(1),G({type:'initial-error'});case 11:case"end":return o.stop()}},null,null,[[1,8]])})(M)},[A,I,M,V]),t.default.createElement(n.View,{style:{flex:1,height:'100%'}},P&&t.default.createElement(p.default,{from:A,to:I,time:M,passengers:V,onClose:function(){return T(!1)},onUpdateSearch:function(t,n,o,c){R(t),D(n),C(o),H(c),h.default.TP_CHANGE_SEARCH_PARAMETERS({from:(0,u.getDisplayTextOfPlace)(t),to:(0,u.getDisplayTextOfPlace)(n),time:(0,b.getFormattedDateString)(M),numberOfPassengers:V})},isVisible:P}),t.default.createElement(y.default,{from:A,to:I,time:M,passengers:V,onBackButtonPressed:o.onBackButtonPressed,onChangeSearchClicked:function(){return T(!0)}}),t.default.createElement(j,{from:(0,u.getDisplayTextOfPlace)(A),to:(0,u.getDisplayTextOfPlace)(I),itineraryState:W,onBuyTicket:o.onBuyTicket,onFetchLaterItineraries:function(t){var n,o;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(0!==t.length){c.next=2;break}return c.abrupt("return");case 2:return G({type:'fetching-later',itineraries:t}),n=(0,s.default)(t[t.length-1].departureScheduled,S.SERVER_DATE_FORMAT).add(1,'minute'),c.prev=4,c.next=7,regeneratorRuntime.awrap(U(n));case 7:o=c.sent,G({type:'has-itineraries',itineraries:[].concat(E(t),E(o.suggestions))}),h.default.TP_FETCH_LATER_ITINERARIES(),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(4),G({type:'fetching-later-error',itineraries:t});case 15:case"end":return c.stop()}},null,null,[[4,12]])},onFeedbackPressed:function(){return k(!0)}}),_&&t.default.createElement(v.default,{isVisible:_,header:(0,f.default)('feedback_travel_search'),onClose:function(){return k(!1)},from:(0,u.getDisplayTextOfPlace)(A),to:(0,u.getDisplayTextOfPlace)(I),selectedTime:M,messageTitle:'Feedback om det nye reises\xf8ket \ud83d\udd0e',feedbackTarget:'travel-planner',placeholder:(0,f.default)('placeholder_feedback_travelsearch'),showFeedbackEmojis:!0}))};e.default=F},1333,[7,10,1334,625,1364,628,653,1337,1366,1389,1294,670,1358,414]);