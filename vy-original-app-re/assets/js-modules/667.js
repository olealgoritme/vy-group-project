__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.writeTicketResponseToDatabase=function(t,c){var s;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,regeneratorRuntime.awrap((0,o.getDatabase)());case 3:return s=u.sent,u.next=6,regeneratorRuntime.awrap(s.sqlBatch([y,[O,[c,JSON.stringify(t),(0,n.default)().toISOString()]]]));case 6:u.next=12;break;case 8:throw u.prev=8,u.t0=u.catch(0),console.log("[tickets-db] Error: "+u.t0.message),new Error('failed to perform DB operation: '+u.t0.message);case 12:case"end":return u.stop()}},null,null,[[0,8]])},e.readTicketResponseFromDatabase=function(t){var c,u,v,O;return regeneratorRuntime.async(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,regeneratorRuntime.awrap((0,o.getDatabase)());case 3:return c=E.sent,E.next=6,regeneratorRuntime.awrap(c.executeSql(y));case 6:return E.next=8,regeneratorRuntime.awrap(c.executeSql(w,[t]));case 8:if(u=E.sent,R=1,v=p(h=u)||f(h,R)||l(),0!==(O=v[0]).rows.length){E.next=13;break}return E.abrupt("return",Promise.reject(b));case 13:return E.abrupt("return",s({},b,{fetchedAt:(0,n.default)(O.rows.item(0).fetchedAt,["YYYY-MM-DD'T'HH:mm:ss.SSSZ",'ddd MMM YY HH:mm:ss Z']),tickets:JSON.parse(O.rows.item(0).value)}));case 16:throw E.prev=16,E.t0=E.catch(0),console.log("[tickets-db] Error: "+E.t0.message),new Error('failed to perform DB operation: '+E.t0.message);case 20:case"end":return E.stop()}var h,R},null,null,[[0,16]])},e.emptyTicketResponseDatabase=function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap((0,o.getDatabase)());case 3:return t=n.sent,n.next=6,regeneratorRuntime.awrap(t.executeSql(v));case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("[tickets-db] Error: "+n.t0.message);case 11:case"end":return n.stop()}},null,null,[[0,8]])};var t,n=(t=r(d[0]))&&t.__esModule?t:{default:t},o=r(d[1]);function c(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function s(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?c(Object(o),!0).forEach(function(n){u(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function u(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(t,n){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],c=!0,s=!1,u=void 0;try{for(var l,f=t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(c=(l=f.next()).done)&&(o.push(l.value),!n||o.length!==n);c=!0);}catch(t){s=!0,u=t}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}return o}}function p(t){if(Array.isArray(t))return t}var b={fetchedAt:null,tickets:[]},y="\n    CREATE TABLE IF NOT EXISTS tickets (\n        userId      CHAR(50)    PRIMARY KEY NOT NULL,\n        value       TEXT,\n        fetchedAt   TEXT\n    );\n    ",v='DELETE from tickets',O='INSERT OR REPLACE INTO tickets (userId, value, fetchedAt) VALUES (?,?,?)',w='SELECT userId, value, fetchedAt FROM tickets WHERE userId=?'},667,[628,622]);