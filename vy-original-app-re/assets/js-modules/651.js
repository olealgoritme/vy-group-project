__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.writeFavoritesForUser=function(o){var u,c;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,regeneratorRuntime.awrap((0,t.getDatabase)());case 3:return u=s.sent,c=o.map(function(t){return l({nextDepartures:[]},t)}),s.next=7,regeneratorRuntime.awrap(u.sqlBatch([p,[b,[(0,n.getUserId)(),JSON.stringify(c)]]]));case 7:s.next=13;break;case 9:throw s.prev=9,s.t0=s.catch(0),console.log('[db] Error: '+s.t0.message),new Error('failed to perform DB operation: '+s.t0.message);case 13:case"end":return s.stop()}},null,null,[[0,9]])},e.readFavoritesForUser=function(){var s,l,f,b,y;return regeneratorRuntime.async(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,O.next=3,regeneratorRuntime.awrap((0,t.getDatabase)());case 3:return s=O.sent,O.next=6,regeneratorRuntime.awrap(s.executeSql(p));case 6:return O.next=8,regeneratorRuntime.awrap(s.executeSql(v,[(0,n.getUserId)()]));case 8:if(l=O.sent,E=1,f=c(w=l)||u(w,E)||o(),1===(b=f[0]).rows.length){O.next=15;break}throw new Error('Invalid amount of favorites found in DB');case 15:return y=JSON.parse(b.rows.item(0).value),O.abrupt("return",y);case 17:O.next=23;break;case 19:throw O.prev=19,O.t0=O.catch(0),console.log("[db] Error: "+O.t0.message),new Error('failed to perform DB operation: '+O.t0.message);case 23:case"end":return O.stop()}var w,E},null,null,[[0,19]])};var t=r(d[0]),n=r(d[1]);function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,n){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],u=!0,c=!1,s=void 0;try{for(var l,f=t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(u=(l=f.next()).done)&&(o.push(l.value),!n||o.length!==n);u=!0);}catch(t){c=!0,s=t}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}return o}}function c(t){if(Array.isArray(t))return t}function s(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,u)}return o}function l(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?s(Object(o),!0).forEach(function(n){f(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function f(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}var p="\n    CREATE TABLE IF NOT EXISTS favorites(\n        userId                    CHAR(50) NOT NULL,\n        value                     TEXT,\n        UNIQUE (userId) ON CONFLICT REPLACE\n    );\n    ",b='INSERT OR REPLACE INTO favorites (userId, value) VALUES (?, ?);',v="\n    SELECT * FROM favorites\n    WHERE userId = ?\n    "},651,[622,626]);