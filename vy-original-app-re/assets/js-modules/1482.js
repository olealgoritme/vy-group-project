__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=v(r(d[0])),o=r(d[1]),n=v(r(d[2])),s=v(r(d[3])),l=r(d[4]),u=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=y();if(o&&o.has(t))return o.get(t);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var u=s?Object.getOwnPropertyDescriptor(t,l):null;u&&(u.get||u.set)?Object.defineProperty(n,l,u):n[l]=t[l]}n.default=t,o&&o.set(t,n);return n})(r(d[5])),c=r(d[6]),f=r(d[7]),p=v(r(d[8])),h=v(r(d[9])),b=v(r(d[10])),w=v(r(d[11])),P=r(d[12]);function y(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return y=function(){return t},t}function v(t){return t&&t.__esModule?t:{default:t}}function F(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function _(t,o){for(var n=0;n<o.length;n++){var s=o[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&j(t,o)}function j(t,o){return(j=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}var C={isLoadingLogin:!0,message:void 0},S={isLoadingLogin:!1},E=(function(P){function y(t){var o,n,s;return F(this,y),n=this,(o=!(s=O(y).call(this,t))||"object"!=typeof s&&"function"!=typeof s?L(n):s).state={isLoadingLogin:!1,isForgotPasswordVisible:!1},o.handleLoginSubmit=o.handleLoginSubmit.bind(L(o)),o.handleForgotPasswordClick=o.handleForgotPasswordClick.bind(L(o)),o.handleForgotPasswordClose=o.handleForgotPasswordClose.bind(L(o)),o.handleForgotPasswordFinish=o.handleForgotPasswordFinish.bind(L(o)),o}var v,j,E;return k(y,t.default.Component),v=y,(j=[{key:"handleLoginSubmit",value:function(t,o){var n,s;return regeneratorRuntime.async(function(f){for(;;)switch(f.prev=f.next){case 0:return this.setState(C),f.prev=1,f.next=4,regeneratorRuntime.awrap((0,c.login)(t,o));case 4:return n=f.sent,f.next=7,regeneratorRuntime.awrap(p.default.storeLoginState({username:t,password:o,coldToken:n.coldToken,userId:n.userId}));case 7:this.setState(S),this.props.onLoginCompleted(),f.next=15;break;case 11:f.prev=11,f.t0=f.catch(1),s=(0,l.getMessageFromErrorIfPresent)(f.t0)||(0,w.default)('login_error'),this.setState((h=s,{isLoadingLogin:!1,message:(0,u.errorMessage)(h)}));case 15:case"end":return f.stop()}var h},null,this,[[1,11]])}},{key:"handleForgotPasswordFinish",value:function(){var t=(0,w.default)('forgot_password_success');this.setState({message:(0,u.successMessage)(t),isForgotPasswordVisible:!1})}},{key:"handleForgotPasswordClose",value:function(){this.setState({isForgotPasswordVisible:!1})}},{key:"handleForgotPasswordClick",value:function(){this.setState({isForgotPasswordVisible:!0})}},{key:"render",value:function(){var l;return t.default.createElement(o.View,null,t.default.createElement(n.default,{onComplete:this.handleForgotPasswordFinish,onClose:this.handleForgotPasswordClose,isVisible:this.state.isForgotPasswordVisible}),t.default.createElement(s.default,{style:{marginTop:42},source:f.greenProfile,text:null!=(l=this.props.iconText)?l:(0,w.default)('login')}),t.default.createElement(u.default,{style:{marginTop:24},message:this.state.message}),t.default.createElement(b.default,{style:{marginTop:24},isLoading:this.state.isLoadingLogin,onSubmit:this.handleLoginSubmit,onForgotPasswordClick:this.handleForgotPasswordClick}),t.default.createElement(h.default,{onPress:this.props.onNewProfilePress,containerStyle:{marginTop:20}},(0,w.default)('create_new_profile')))}}])&&_(v.prototype,j),E&&_(v,E),y})(),T=(0,P.withUserProfile)(E);e.default=T},1482,[7,10,1483,1486,626,1487,616,675,635,1178,1488,1490,637]);