__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=E();if(n&&n.has(t))return n.get(t);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var c=l?Object.getOwnPropertyDescriptor(t,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=t[s]}o.default=t,n&&n.set(t,o);return o})(r(d[0])),n=r(d[1]),o=r(d[2]),l=h(r(d[3])),s=r(d[4]),c=r(d[5]),u=h(r(d[6])),p=h(r(d[7])),f=h(r(d[8])),y=h(r(d[9])),S=h(r(d[10]));function h(t){return t&&t.__esModule?t:{default:t}}function E(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return E=function(){return t},t}function _(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function b(t,n){for(var o=0;o<n.length;o++){var l=n[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&O(t,n)}function O(t,n){return(O=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var w=(function(h){function E(n){var o,l,s;return _(this,E),l=this,(o=!(s=v(E).call(this,n))||"object"!=typeof s&&"function"!=typeof s?C(l):s)._flatList=t.createRef(),o.state={query:'',data:[]},o.onChangeQuery=o.onChangeQuery.bind(C(o)),o.onStopSelected=o.onStopSelected.bind(C(o)),o.filterData=o.filterData.bind(C(o)),o.onRecentStopSelected=o.onRecentStopSelected.bind(C(o)),o.onZoneSelected=o.onZoneSelected.bind(C(o)),o.onSearchListStopSelected=o.onSearchListStopSelected.bind(C(o)),o}var O,w,R;return T(E,t.Component),O=E,(w=[{key:"componentDidUpdate",value:function(t){var n;(null==(n=this.props.stops)?void 0:n.length)&&t.stops!==this.props.stops&&this.setState({data:this.props.stops}),this.props.isVisible&&!t.isVisible&&this.setState({query:''})}},{key:"onChangeQuery",value:function(t){this.setState({query:t}),this.filterData(t),this._flatList.current&&this._flatList.current.scrollToOffset({offset:0,animated:!0})}},{key:"filterData",value:function(t){var n=this,o=L(this.props.stops,t);clearTimeout(this._selectStopTimeout),this.setState({data:o},function(){1===o.length&&(n._selectStopTimeout=setTimeout(function(){return n.onStopSelected(o[0])},500))})}},{key:"onStopSelected",value:function(t){this.props.onClose(),this.props.onStopSelected(this.props.type,t)}},{key:"onRecentStopSelected",value:function(t){this.onStopSelected(t),l.default.RUTER_RECENT_SEARCH_SELECTED()}},{key:"onZoneSelected",value:function(t){this.onStopSelected(t),l.default.RUTER_SELECTED_ZONE_FROM_LIST()}},{key:"onSearchListStopSelected",value:function(t){this.onStopSelected(t),l.default.RUTER_SELECTED_STOP_FROM_SEARCH_RESULTS()}},{key:"render",value:function(){var l=this,h=this.props,E=h.type,_=h.onClose,b=h.isVisible,v=h.nearbyStops,C=h.recentStops,T=h.zones,O=this.state.query.length;return t.createElement(u.default,{isVisible:b,onClose:_},t.createElement(o.SafeAreaView,{forceInset:{top:'always',bottom:'always'},style:{flex:1}},t.createElement(n.View,{style:{zIndex:10}},t.createElement(s.HeaderCard,{style:{justifyContent:'center',paddingHorizontal:24,paddingBottom:24}},t.createElement(p.default,{onClose:_,onChangeQuery:this.onChangeQuery,query:this.state.query,type:E}))),O?t.createElement(n.FlatList,{keyboardShouldPersistTaps:"always",ref:this._flatList,onScrollBeginDrag:function(){return n.Keyboard.dismiss()},data:this.state.data,keyExtractor:function(t){return t.id},ItemSeparatorComponent:function(){return t.createElement(s.GreyLine,{style:{marginVertical:3}})},renderItem:function(n){var o=n.item;return t.createElement(f.default,{onPress:l.onSearchListStopSelected,stop:o})},ListEmptyComponent:t.createElement(s.MediumText,{style:{alignSelf:'center'}},(0,S.default)('no_stop_place_found_with_query')),contentContainerStyle:{paddingTop:24,paddingHorizontal:24}}):t.createElement(n.ScrollView,{contentContainerStyle:{paddingHorizontal:24,paddingBottom:100}},(null==T?void 0:T.length)>0&&t.createElement(n.View,{style:{marginTop:30}},t.createElement(s.SmallText,{mediumGrey:!0,style:{marginBottom:6}},(0,S.default)('zones')),t.createElement(y.default,{zones:T,onStopSelected:this.onZoneSelected})),(null==v?void 0:v.length)>0&&t.createElement(n.View,{style:{marginTop:30}},t.createElement(s.SmallText,{mediumGrey:!0,style:{marginBottom:6}},(0,S.default)('close_by')),v.map(function(n){return t.createElement(f.default,{key:n.id,stop:n,image:c.locationGreen,imageSize:18,onPress:l.onStopSelected})})),(null==C?void 0:C.length)>0&&t.createElement(t.Fragment,null,t.createElement(s.GreyLine,{style:{marginVertical:18}}),t.createElement(s.SmallText,{mediumGrey:!0,style:{marginBottom:12}},(0,S.default)('recent')),C.map(function(n){return t.createElement(f.default,{key:n.id,stop:n,image:c.recentSearch,imageSize:22,onPress:l.onRecentStopSelected})})))))}}])&&b(O.prototype,w),R&&b(O,R),E})(),L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'';if(!t.length||!n.length)return[];var o=n.trim().toLowerCase();return t.filter(function(t){var n=t.name.toLowerCase();return n===o||(!!n.startsWith(o)||n.split(' ').some(function(t){return t.startsWith(o)}))})},R=w;e.default=R},1524,[7,10,435,1294,653,675,1241,1525,1527,1528,1472]);