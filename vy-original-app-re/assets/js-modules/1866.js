__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=l(r(d[0])),n=r(d[1]),o=r(d[2]),u=r(d[3]),s=l(r(d[4])),c=r(d[5]);function l(t){return t&&t.__esModule?t:{default:t}}var E=(0,s.default)(function(){var s,l,E;return regeneratorRuntime.async(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,console.log('[masterdata] Check if an update is needed'),f.next=4,regeneratorRuntime.awrap((0,u.getKey)(c.MASTERDATA_REFRESH_TIMESTAMP_STORAGE_KEY));case 4:if(s=f.sent,l=(0,t.default)().diff((0,t.default)(s)),s&&!(l>c.MASTERDATA_REFRESH_INTERVAL)){f.next=13;break}return console.log("[masterdata] Update needed - "+l+"ms since last update"),E=[(0,n.fetchStationsList)(),(0,n.fetchLocalOperatorStopList)(),(0,o.getFeatureToggles)()],f.next=11,regeneratorRuntime.awrap(Promise.all(E.map(function(t){return t.catch(console.warn)})));case 11:return f.next=13,regeneratorRuntime.awrap((0,u.insertKey)(c.MASTERDATA_REFRESH_TIMESTAMP_STORAGE_KEY,(0,t.default)().toISOString()));case 13:f.next=18;break;case 15:f.prev=15,f.t0=f.catch(0),console.log('[masterdata] Failed to update with error: '+JSON.stringify(f.t0));case 18:case"end":return f.stop()}},null,null,[[0,15]])},c.MASTERDATA_REFRESH_DEBOUNCE_TIMEOUT);e.default=E},1866,[628,625,616,644,983,414]);