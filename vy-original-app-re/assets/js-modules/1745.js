__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=w();if(n&&n.has(t))return n.get(t);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var f=l?Object.getOwnPropertyDescriptor(t,u):null;f&&(f.get||f.set)?Object.defineProperty(o,u,f):o[u]=t[u]}o.default=t,n&&n.set(t,o);return o})(r(d[0])),n=r(d[1]),o=r(d[2]),l=r(d[3]),u=r(d[4]),f=r(d[5]),c=r(d[6]),s=r(d[7]),y=v(r(d[8])),p=v(r(d[9])),b=v(r(d[10]));function v(t){return t&&t.__esModule?t:{default:t}}function w(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return w=function(){return t},t}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(t){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function O(t){if(Array.isArray(t)){for(var n=0,o=new Array(t.length);n<t.length;n++)o[n]=t[n];return o}}function j(t,n){return S(t)||E(t,n)||A()}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function E(t,n){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],l=!0,u=!1,f=void 0;try{for(var c,s=t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(l=(c=s.next()).done)&&(o.push(c.value),!n||o.length!==n);l=!0);}catch(t){u=!0,f=t}finally{try{l||null==s.return||s.return()}finally{if(u)throw f}}return o}}function S(t){if(Array.isArray(t))return t}var x=n.StyleSheet.create({row:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginTop:6},multiLegContainer:{marginTop:12,paddingHorizontal:18,paddingVertical:12,backgroundColor:s.colors.brightGrey}}),P=function(s){var v=s.availableAddons,w=s.order,A=s.onSetOrder,E=s.onClose,S=s.isVisible,P=s.showAddonsInfoModal,M=s.isComfortPackage,T=j((0,t.useState)(!1),2),I=T[0],B=T[1],C=j((0,t.useState)(!1),2),V=C[0],k=C[1],q=j((0,t.useState)(v),2),L=q[0],D=q[1],G=L.reduce(function(t,n){return t+n.priceInOere*n.quantity},0);function R(t){var n,o=L.find(function(n){return n.type===t.type});o&&(o.quantity=t.quantity,D(O(n=L)||h(n)||_()))}return t.default.createElement(o.BottomModal,{buttonText:(0,y.default)('confirm'),isVisible:S,isLoading:V,onClose:E,onPressButton:function(){var t,o;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return k(!0),l.prev=1,t=L.map(function(t){return{addonType:t.type,quantity:t.quantity}}),l.next=5,regeneratorRuntime.awrap((0,f.updateItineraryAddons)(w.id,w.itineraries[0].id,t));case 5:o=l.sent,k(!1),A(o),E(),l.next=15;break;case 11:l.prev=11,l.t0=l.catch(1),k(!1),n.Alert.alert((0,y.default)('order_or_payment_failed_alert_title'),(0,u.getMessageFromErrorIfPresent)(l.t0)||(0,y.default)('initiate_order_failed_generic_message'),[{text:'OK',onPress:E}]);case 15:case"end":return l.stop()}},null,null,[[1,11]])}},t.default.createElement(n.View,{style:x.row},t.default.createElement(o.LargeTextBold,null,(0,y.default)('add')+':'),P&&t.default.createElement(o.InfoButton,{text:(0,y.default)('more_info'),onPress:function(){return B(!I)},icon:c.infoIconGrey,style:{paddingRight:0,paddingBottom:0}})),t.default.createElement(n.View,{style:{marginTop:18,marginBottom:24}},L.map(function(n,o){return n&&t.default.createElement(b.default,{key:o,addon:n,onUpdateAddons:R})}),t.default.createElement(o.GreyLine,{style:{marginVertical:12}}),t.default.createElement(n.View,{style:x.row},t.default.createElement(o.MediumTextBold,{style:{flex:1}},(0,y.default)(M?'total_comfort':'total_addons')+':'),t.default.createElement(o.MediumTextBold,{style:{marginLeft:6}},(0,l.getAmountFromOereWithCurrency)(G)))),P&&t.default.createElement(p.default,{isVisible:I,onClose:function(){return B(!1)},addons:v}))};e.default=P},1745,[7,10,653,1236,636,642,675,414,1234,1746,1747]);