__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ANDROID_TEXTURE_NATIVE_MODULE_NAME=e.NATIVE_MODULE_NAME=void 0;var n=c(r(d[0])),t=c(r(d[1])),o=r(d[2]),s=c(r(d[3])),u=r(d[4]),l=r(d[5]),p=r(d[6]);function c(n){return n&&n.__esModule?n:{default:n}}function h(){return(h=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])}return n}).apply(this,arguments)}function f(n,t){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),o.push.apply(o,s)}return o}function v(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach(function(t){b(n,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function b(n,t,o){return t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n}function y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function C(n,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function R(n){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function _(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function M(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&k(n,t)}function k(n,t){return(k=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var D=o.NativeModules.MGLModule;e.NATIVE_MODULE_NAME="RCTMGLMapView";e.ANDROID_TEXTURE_NATIVE_MODULE_NAME="RCTMGLAndroidTextureMapView";var E=o.StyleSheet.create({matchParent:{flex:1}}),F=(function(t){function c(n){var t,o,u;return y(this,c),o=this,(t=!(u=R(c).call(this,n))||"object"!=typeof u&&"function"!=typeof u?_(o):u).state={isReady:null},t._onPress=t._onPress.bind(_(t)),t._onLongPress=t._onLongPress.bind(_(t)),t._onChange=t._onChange.bind(_(t)),t._onAndroidCallback=t._onAndroidCallback.bind(_(t)),t._onLayout=t._onLayout.bind(_(t)),t._onDebouncedRegionWillChange=s.default.debounce(t._onRegionWillChange.bind(_(t)),n.regionWillChangeDebounceTime,!0),t._onDebouncedRegionDidChange=s.default.debounce(t._onRegionDidChange.bind(_(t)),n.regionDidChangeDebounceTime),t._callbackMap=new Map,t._preRefMapMethodQueue=[],t}var f,b,k;return M(c,n.default.Component),f=c,(b=[{key:"componentDidMount",value:function(){this._setHandledMapChangedEvents(this.props)}},{key:"componentWillReceiveProps",value:function(n){this._setHandledMapChangedEvents(n)}},{key:"_setHandledMapChangedEvents",value:function(n){if((0,l.isAndroid)()){var t=[];n.onRegionWillChange&&t.push(D.EventTypes.RegionWillChange),n.onRegionIsChanging&&t.push(D.EventTypes.RegionIsChanging),n.onRegionDidChange&&t.push(D.EventTypes.RegionDidChange),n.onUserLocationUpdate&&t.push(D.EventTypes.UserLocationUpdated),n.onWillStartLoadingMap&&t.push(D.EventTypes.WillStartLoadingMap),n.onDidFinishLoadingMap&&t.push(D.EventTypes.DidFinishLoadingMap),n.onDidFailLoadingMap&&t.push(D.EventTypes.DidFailLoadingMap),n.onWillStartRenderingFrame&&t.push(D.EventTypes.WillStartRenderingFrame),n.onDidFinishRenderingFrame&&t.push(D.EventTypes.DidFinishRenderingFrame),n.onDidFinishRenderingFrameFully&&t.push(D.EventTypes.DidFinishRenderingFrameFully),n.onWillStartRenderingMap&&t.push(D.EventTypes.WillStartRenderingMap),n.onDidFinishRenderingMap&&t.push(D.EventTypes.DidFinishRenderingMap),n.onDidFinishRenderingMapFully&&t.push(D.EventTypes.DidFinishRenderingMapFully),n.onDidFinishLoadingStyle&&t.push(D.EventTypes.DidFinishLoadingStyle),this._runNativeCommand('setHandledMapChangedEvents',t)}}},{key:"getPointInView",value:function(n){var t;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this._runNativeCommand('getPointInView',[n]));case 2:return t=o.sent,o.abrupt("return",t.pointInView);case 4:case"end":return o.stop()}},null,this)}},{key:"getCoordinateFromView",value:function(n){var t;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this._runNativeCommand('getCoordinateFromView',[n]));case 2:return t=o.sent,o.abrupt("return",t.coordinateFromView);case 4:case"end":return o.stop()}},null,this)}},{key:"getVisibleBounds",value:function(){var n;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this._runNativeCommand('getVisibleBounds'));case 2:return n=t.sent,t.abrupt("return",n.visibleBounds);case 4:case"end":return t.stop()}},null,this)}},{key:"queryRenderedFeaturesAtPoint",value:function(n){var t,o,s,u=arguments;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(t=u.length>1&&void 0!==u[1]?u[1]:[],o=u.length>2&&void 0!==u[2]?u[2]:[],n&&!(n.length<2)){c.next=4;break}throw new Error('Must pass in valid coordinate[lng, lat]');case 4:return c.next=6,regeneratorRuntime.awrap(this._runNativeCommand('queryRenderedFeaturesAtPoint',[n,(0,p.getFilter)(t),o]));case 6:if(s=c.sent,!(0,l.isAndroid)()){c.next=9;break}return c.abrupt("return",JSON.parse(s.data));case 9:return c.abrupt("return",s.data);case 10:case"end":return c.stop()}},null,this)}},{key:"queryRenderedFeaturesInRect",value:function(n){var t,o,s,u=arguments;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(t=u.length>1&&void 0!==u[1]?u[1]:[],o=u.length>2&&void 0!==u[2]?u[2]:[],n&&4===n.length){c.next=4;break}throw new Error('Must pass in a valid bounding box[top, right, bottom, left]');case 4:return c.next=6,regeneratorRuntime.awrap(this._runNativeCommand('queryRenderedFeaturesInRect',[n,(0,p.getFilter)(t),o]));case 6:if(s=c.sent,!(0,l.isAndroid)()){c.next=9;break}return c.abrupt("return",JSON.parse(s.data));case 9:return c.abrupt("return",s.data);case 10:case"end":return c.stop()}},null,this)}},{key:"fitBounds",value:function(n,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u={paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0};return Array.isArray(o)?2===o.length?(u.paddingTop=o[0],u.paddingBottom=o[0],u.paddingLeft=o[1],u.paddingRight=o[1]):4===o.length&&(u.paddingTop=o[0],u.paddingRight=o[1],u.paddingBottom=o[2],u.paddingLeft=o[3]):(u.paddingLeft=o,u.paddingRight=o,u.paddingTop=o,u.paddingBottom=o),this.setCamera({bounds:v({ne:n,sw:t},u),duration:s,mode:D.CameraModes.None})}},{key:"flyTo",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return this.setCamera({centerCoordinate:n,duration:t,mode:D.CameraModes.Flight})}},{key:"moveTo",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.setCamera({centerCoordinate:n,duration:t})}},{key:"zoomTo",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return this.setCamera({zoom:n,duration:t,mode:D.CameraModes.Flight})}},{key:"setCamera",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};if(n.stops){t.stops=[];var o=n.stops,s=Array.isArray(o),u=0;for(o=s?o:o["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var l;if(s){if(u>=o.length)break;l=o[u++]}else{if((u=o.next()).done)break;l=u.value}var p=l;t.stops.push(this._createStopConfig(p))}}else t=this._createStopConfig(n);return this._runNativeCommand('setCamera',[t])}},{key:"takeSnap",value:function(){var n,t,o=arguments;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return n=o.length>0&&void 0!==o[0]&&o[0],s.next=3,regeneratorRuntime.awrap(this._runNativeCommand('takeSnap',[n]));case 3:return t=s.sent,s.abrupt("return",t.uri);case 5:case"end":return s.stop()}},null,this)}},{key:"getZoom",value:function(){var n;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this._runNativeCommand('getZoom'));case 2:return n=t.sent,t.abrupt("return",n.zoom);case 4:case"end":return t.stop()}},null,this)}},{key:"getCenter",value:function(){var n;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this._runNativeCommand('getCenter'));case 2:return n=t.sent,t.abrupt("return",n.center);case 4:case"end":return t.stop()}},null,this)}},{key:"showAttribution",value:function(){return this._runNativeCommand('showAttribution')}},{key:"_runNativeCommand",value:function(n){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this._nativeRef?(0,l.isAndroid)()?new Promise(function(s){var u=""+Date.now();t._addAddAndroidCallback(u,s),o.unshift(u),(0,l.runNativeCommand)("RCTMGLMapView",n,t._nativeRef,o)}):(0,l.runNativeCommand)("RCTMGLMapView",n,this._nativeRef,o):new Promise(function(s){t._preRefMapMethodQueue.push({method:{name:n,args:o},resolver:s})})}},{key:"_createStopConfig",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={mode:(0,l.isNumber)(n.mode)?n.mode:D.CameraModes.Ease,pitch:n.pitch,heading:n.heading,duration:n.duration||2e3,zoom:n.zoom};if(n.centerCoordinate&&(t.centerCoordinate=(0,l.toJSONString)((0,u.makePoint)(n.centerCoordinate))),n.bounds&&n.bounds.ne&&n.bounds.sw){var o=n.bounds,s=o.ne,p=o.sw,c=o.paddingLeft,h=o.paddingRight,f=o.paddingTop,v=o.paddingBottom;t.bounds=(0,l.toJSONString)((0,u.makeLatLngBounds)(s,p)),t.boundsPaddingTop=f||0,t.boundsPaddingRight=h||0,t.boundsPaddingBottom=v||0,t.boundsPaddingLeft=c||0}return t}},{key:"_addAddAndroidCallback",value:function(n,t){this._callbackMap.set(n,t)}},{key:"_removeAndroidCallback",value:function(n){this._callbackMap.remove(n)}},{key:"_onAndroidCallback",value:function(n){var t=n.nativeEvent.type,o=this._callbackMap.get(t);o&&(this._callbackMap.delete(t),o.call(null,n.nativeEvent.payload))}},{key:"_onPress",value:function(n){(0,l.isFunction)(this.props.onPress)&&this.props.onPress(n.nativeEvent.payload)}},{key:"_onLongPress",value:function(n){(0,l.isFunction)(this.props.onLongPress)&&this.props.onLongPress(n.nativeEvent.payload)}},{key:"_onRegionWillChange",value:function(n){(0,l.isFunction)(this.props.onRegionWillChange)&&this.props.onRegionWillChange(n)}},{key:"_onRegionDidChange",value:function(n){(0,l.isFunction)(this.props.onRegionDidChange)&&this.props.onRegionDidChange(n)}},{key:"_onChange",value:function(n){var t=this.props,o=t.regionWillChangeDebounceTime,s=t.regionDidChangeDebounceTime,u=n.nativeEvent,l=u.type,p=u.payload,c='';switch(l){case D.EventTypes.RegionWillChange:o>0?this._onDebouncedRegionWillChange(p):c='onRegionWillChange';break;case D.EventTypes.RegionIsChanging:c='onRegionIsChanging';break;case D.EventTypes.RegionDidChange:s>0?this._onDebouncedRegionDidChange(p):c='onRegionDidChange';break;case D.EventTypes.UserLocationUpdated:c='onUserLocationUpdate';break;case D.EventTypes.WillStartLoadingMap:c='onWillStartLoadingMap';break;case D.EventTypes.DidFinishLoadingMap:c='onDidFinishLoadingMap';break;case D.EventTypes.DidFailLoadingMap:c='onDidFailLoadingMap';break;case D.EventTypes.WillStartRenderingFrame:c='onWillStartRenderingFrame';break;case D.EventTypes.DidFinishRenderingFrame:c='onDidFinishRenderingFrame';break;case D.EventTypes.DidFinishRenderingFrameFully:c='onDidFinishRenderingFrameFully';break;case D.EventTypes.WillStartRenderingMap:c='onWillStartRenderingMap';break;case D.EventTypes.DidFinishRenderingMap:c='onDidFinishRenderingMap';break;case D.EventTypes.DidFinishRenderingMapFully:c='onDidFinishRenderingMapFully';break;case D.EventTypes.DidFinishLoadingStyle:c='onDidFinishLoadingStyle';break;default:console.warn('Unhandled event callback type',l)}c.length&&this._handleOnChange(c,p)}},{key:"_onLayout",value:function(){this.setState({isReady:!0})}},{key:"_handleOnChange",value:function(n,t){(0,l.isFunction)(this.props[n])&&this.props[n](t)}},{key:"_getCenterCoordinate",value:function(){if(this.props.centerCoordinate)return(0,l.toJSONString)((0,u.makePoint)(this.props.centerCoordinate))}},{key:"_getVisibleCoordinateBounds",value:function(){if(this.props.visibleCoordinateBounds)return(0,l.toJSONString)((0,u.makeLatLngBounds)(this.props.visibleCoordinateBounds[0],this.props.visibleCoordinateBounds[1]))}},{key:"_getContentInset",value:function(){if(this.props.contentInset)return Array.isArray(this.props.contentInset)?this.props.contentInset:[this.props.contentInset]}},{key:"_setNativeRef",value:function(n){var t,o;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:this._nativeRef=n;case 1:if(!(this._preRefMapMethodQueue.length>0)){s.next=10;break}if(!((t=this._preRefMapMethodQueue.pop())&&t.method&&t.resolver)){s.next=8;break}return s.next=6,regeneratorRuntime.awrap(this._runNativeCommand(t.method.name,t.method.args));case 6:o=s.sent,t.resolver(o);case 8:s.next=1;break;case 10:case"end":return s.stop()}},null,this)}},{key:"render",value:function(){var t=this,s=v({},this.props,{centerCoordinate:this._getCenterCoordinate(),visibleCoordinateBounds:this._getVisibleCoordinateBounds(),contentInset:this._getContentInset(),style:E.matchParent}),u={ref:function(n){return t._setNativeRef(n)},onPress:this._onPress,onLongPress:this._onLongPress,onMapChange:this._onChange,onAndroidCallback:(0,l.isAndroid)()?this._onAndroidCallback:void 0,onUserTrackingModeChange:this.props.onUserTrackingModeChange},p=null;return(0,l.isAndroid)()&&!this.props.surfaceView&&this.state.isReady?p=n.default.createElement(T,h({},s,u),this.props.children):this.state.isReady&&(p=n.default.createElement(L,h({},s,u),this.props.children)),n.default.createElement(o.View,{onLayout:this._onLayout,style:this.props.style},p)}}])&&C(f.prototype,b),k&&C(f,k),c})();F.propTypes=v({},l.viewPropTypes,{animated:t.default.bool,centerCoordinate:t.default.arrayOf(t.default.number),visibleCoordinateBounds:t.default.arrayOf(t.default.arrayOf(t.default.number)),showUserLocation:t.default.bool,userTrackingMode:t.default.number,userLocationVerticalAlignment:t.default.number,contentInset:t.default.oneOfType([t.default.arrayOf(t.default.number),t.default.number]),heading:t.default.number,pitch:t.default.number,style:t.default.any,styleURL:t.default.string,zoomLevel:t.default.number,minZoomLevel:t.default.number,maxZoomLevel:t.default.number,localizeLabels:t.default.bool,zoomEnabled:t.default.bool,scrollEnabled:t.default.bool,pitchEnabled:t.default.bool,rotateEnabled:t.default.bool,attributionEnabled:t.default.bool,logoEnabled:t.default.bool,compassEnabled:t.default.bool,surfaceView:t.default.bool,onPress:t.default.func,onLongPress:t.default.func,onRegionWillChange:t.default.func,onRegionIsChanging:t.default.func,onRegionDidChange:t.default.func,onUserLocationUpdate:t.default.func,onWillStartLoadingMap:t.default.func,onDidFinishLoadingMap:t.default.func,onDidFailLoadingMap:t.default.func,onWillStartRenderingFrame:t.default.func,onDidFinishRenderingFrame:t.default.func,onDidFinishRenderingFrameFully:t.default.func,onWillStartRenderingMap:t.default.func,onDidFinishRenderingMap:t.default.func,onDidFinishRenderingMapFully:t.default.func,onDidFinishLoadingStyle:t.default.func,onUserTrackingModeChange:t.default.func,regionWillChangeDebounceTime:t.default.number,regionDidChangeDebounceTime:t.default.number}),F.defaultProps={animated:!1,heading:0,pitch:0,localizeLabels:!1,scrollEnabled:!0,pitchEnabled:!0,rotateEnabled:!0,attributionEnabled:!0,logoEnabled:!0,zoomLevel:16,userTrackingMode:D.UserTrackingModes.None,styleURL:D.StyleURL.Street,surfaceView:!1,regionWillChangeDebounceTime:10,regionDidChangeDebounceTime:500};var T,L=(0,o.requireNativeComponent)("RCTMGLMapView",F,{nativeOnly:{onMapChange:!0,onAndroidCallback:!0}});(0,l.isAndroid)()&&(T=(0,o.requireNativeComponent)("RCTMGLAndroidTextureMapView",F,{nativeOnly:{onMapChange:!0,onAndroidCallback:!0}}));var w=F;e.default=w},1405,[7,48,10,1406,1403,1402,1407]);