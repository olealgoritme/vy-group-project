__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=O();if(n&&n.has(t))return n.get(t);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in t)if(Object.prototype.hasOwnProperty.call(t,f)){var u=o?Object.getOwnPropertyDescriptor(t,f):null;u&&(u.get||u.set)?Object.defineProperty(s,f,u):s[f]=t[f]}s.default=t,n&&n.set(t,s);return s})(r(d[0])),n=r(d[1]),s=y(r(d[2])),o=y(r(d[3])),f=y(r(d[4])),u=y(r(d[5])),c=y(r(d[6])),l=y(r(d[7])),p=r(d[8]),_=r(d[9]),h=r(d[10]),v=r(d[11]);function y(t){return t&&t.__esModule?t:{default:t}}function O(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return O=function(){return t},t}function k(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function T(t,n){for(var s=0;s<n.length;s++){var o=n[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&P(t,n)}function P(t,n){return(P=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var j=(function(y){function O(){var t,n,s,o;k(this,O);for(var f=arguments.length,u=new Array(f),c=0;c<f;c++)u[c]=arguments[c];return s=this,(n=!(o=(t=E(O)).call.apply(t,[this].concat(u)))||"object"!=typeof o&&"function"!=typeof o?b(s):o).state={transferOptions:void 0,transferOptionsError:void 0,isFetchingTransferOptions:!0,isTransferring:!1},n}var P,j,S;return w(O,t.Component),P=O,(j=[{key:"componentDidMount",value:function(){this.getTransferOptions()}},{key:"getTransferOptions",value:function(){var t=this,n=this.props.navigation.state.params.ticket.ticketId;(0,p.getTransferOptionsForTicket)(n).then(function(n){return t.setState({transferOptions:n})}).catch(function(n){return t.setState({transferOptionsError:n.message||(0,o.default)('transfer_ticket_generic_error')})}).done(function(){return t.setState({isFetchingTransferOptions:!1})})}},{key:"transferTicket",value:function(){var t=this,n=this.props.navigation.state.params.ticket.ticketId;this.setState({isTransferring:!0},function(){(0,p.transferTicket)(n).then(function(t){return(0,h.emptyTicketDatabaseAndRefetchTickets)()}).then(function(){return t.createSuccessAlert()}).catch(function(n){return t.createErrorAlert(n)}).done(function(){return t.setState({isTransferring:!1})})})}},{key:"resetNavigationToTicketListScreen",value:function(){(0,v.resetToParentStackAndNavigateTo)(this.props.navigation)}},{key:"createSuccessAlert",value:function(){var t=this;n.Alert.alert((0,o.default)('transfer_ticket_alert_title_on_success'),(0,o.default)('transfer_ticket_alert_message_on_success'),[{text:(0,o.default)('transfer_ticket_alert_dismiss'),onPress:function(){return t.resetNavigationToTicketListScreen()}}])}},{key:"createErrorAlert",value:function(){this.setState({isTransferring:!1});var t=this.props.navigation;n.Alert.alert((0,o.default)('transfer_ticket_alert_title_on_error'),(0,o.default)('transfer_ticket_alert_message_on_error'),[{text:(0,o.default)('transfer_ticket_alert_dismiss'),onPress:function(){return t.goBack(null)}}])}},{key:"render",value:function(){var p=this,h=this.state.transferOptions&&this.state.transferOptions.transferable,v=this.state.transferOptions&&this.state.transferOptions.explanation;return t.default.createElement(l.default,null,t.default.createElement(c.default,{style:f.default.container},this.state.isFetchingTransferOptions&&t.default.createElement(s.default,null),this.state.transferOptionsError&&t.default.createElement(_.MediumText,null,this.state.transferOptionsError),this.state.transferOptions&&t.default.createElement(n.View,{style:f.default.transferTicketContainer},t.default.createElement(_.MediumText,null,v),h&&t.default.createElement(n.View,{style:{marginBottom:12}},t.default.createElement(u.default,{children:(0,o.default)('transfer_ticket_button_text'),onPress:function(){return p.transferTicket()},disabled:this.state.isTransferring,loading:this.state.isTransferring,containerStyle:{marginBottom:12}})))))}}])&&T(P.prototype,j),S&&T(P,S),O})();j.navigationOptions=function(t){t.navigation;return{headerTitle:(0,o.default)('transfer_ticket_title_bar')}};var S=j;e.default=S},1752,[7,10,1184,673,1753,986,1174,1266,662,962,1634,1701]);