__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),l=(g=s.getGlobalObject(),(function(o){function l(){var t=null!==o&&o.apply(this,arguments)||this;return t._disabledUntil=new Date(Date.now()),t}return t.__extends(l,o),l.prototype.sendEvent=function(t){var o=this;if(new Date(Date.now())<this._disabledUntil)return Promise.reject({event:t,reason:"Transport locked till "+this._disabledUntil+" due to too many requests.",status:429});var l={body:JSON.stringify(t),method:'POST',referrerPolicy:s.supportsReferrerPolicy()?'origin':''};return this._buffer.add(new s.SyncPromise(function(t,u){g.fetch(o.url,l).then(function(l){var f=n.Status.fromHttpCode(l.status);if(f!==n.Status.Success){if(f===n.Status.RateLimit){var c=Date.now();o._disabledUntil=new Date(c+s.parseRetryAfterHeader(c,l.headers.get('Retry-After'))),s.logger.warn("Too many requests, backing off till: "+o._disabledUntil)}u(l)}else t({status:f})}).catch(u)}))},l})(o.BaseTransport));e.FetchTransport=l},2009,[1972,1966,1975,2008]);