__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=P();if(n&&n.has(t))return n.get(t);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var l=u?Object.getOwnPropertyDescriptor(t,s):null;l&&(l.get||l.set)?Object.defineProperty(o,s,l):o[s]=t[s]}o.default=t,n&&n.set(t,o);return o})(r(d[0])),n=r(d[1]),o=r(d[2]),u=O(r(d[3])),s=O(r(d[4])),l=r(d[5]),c=r(d[6]),f=r(d[7]),p=r(d[8]),b=O(r(d[9])),h=O(r(d[10])),v=O(r(d[11])),y=r(d[12]);function O(t){return t&&t.__esModule?t:{default:t}}function P(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return P=function(){return t},t}function _(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,u)}return o}function N(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?_(Object(o),!0).forEach(function(n){w(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function w(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function E(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function j(t,n){for(var o=0;o<n.length;o++){var u=n[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&x(t,n)}function x(t,n){return(x=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var C=(function(y){function O(){var t,n,o,s;E(this,O);for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return o=this,(n=!(s=(t=S(O)).call.apply(t,[this].concat(c)))||"object"!=typeof s&&"function"!=typeof s?T(o):s).state={user:{loginToken:'',userId:'',email:'',firstName:'',lastName:'',birthdate:(0,u.default)().subtract(30,'y'),mobileNumber:'',zipCode:''},isLoading:!1,isRequiredFieldFilled:!1},n}var P,_,x;return k(O,t.Component),P=O,(_=[{key:"componentDidMount",value:function(){var t=this.props.navigation.state.params,n=t.loginToken,o=t.userId,u=t.email;this.setState(function(t){return{user:N({},t.user,{loginToken:n,userId:o,email:u})}})}},{key:"handleNextButtonUpdateProfileWithNewInfo",value:function(){var t,u=this;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return this.setState({isLoading:!0}),s.prev=1,s.next=4,regeneratorRuntime.awrap((0,f.updateUserWithMoreInfo)(N({},this.state.user)));case 4:t=s.sent,this.props.setUserProfile(t),this.navigateToRegisterConsent(),s.next=14;break;case 9:s.prev=9,s.t0=s.catch(1),this.setState({isLoading:!1}),l.remoteLogger.error(l.sources.PROFILE,'Unable to update newly created profile with personal information',{error:s.t0}),n.Alert.alert('',(0,v.default)('error_alert_user_created'),[{text:'OK',onPress:function(){u.props.navigation.dispatch(o.NavigationActions.navigate({routeName:'ProfileStack'}))}}],{cancelable:!1});case 14:case"end":return s.stop()}},null,this,[[1,9]])}},{key:"navigateToRegisterConsent",value:function(){s.default.NEW_PROFILE_STEP_2_DONE(),this.props.navigation.navigate('UpdateConsentsScreen',N({},this.props.navigation.state.params,{loginToken:this.state.user.loginToken,userId:this.state.user.userId,firstName:this.state.user.firstName}))}},{key:"handleTextChange",value:function(t,n){this.setState(function(o){return{user:N({},o.user,w({},t,n))}})}},{key:"toggleNextButton",value:function(){var t=this.state.user,n=t.firstName,o=t.lastName,u=t.mobileNumber,s=t.zipCode;this.setState({isRequiredFieldFilled:(0,p.validateText)(n)&&(0,p.validateText)(o)&&(0,p.validateMobileNumber)(u)&&(0,p.validateZIPCode)(s)})}},{key:"render",value:function(){var o=this,u=this.state.user,l=u.firstName,f=u.lastName,y=u.birthdate,O=u.mobileNumber,P=u.zipCode;return t.default.createElement(c.ScreenView,null,t.default.createElement(b.default,{accessibleHeaderTitle:(0,v.default)('accessible_personal_info_title'),screenName:"PERSONAL_SCREEN",rightButton:(0,v.default)('skip_button'),rightButtonAction:function(){o.navigateToRegisterConsent(),s.default.NEW_PROFILE_STEP_2_SKIP()}}),t.default.createElement(c.KeyboardSafeScrollView,null,t.default.createElement(n.View,{style:{marginHorizontal:18,marginTop:30}},t.default.createElement(h.default,{firstName:l,lastName:f,birthdate:y,mobileNumber:O,zipCode:P,activeButton:function(){return o.toggleNextButton()},validateText:function(t){return(0,p.validateText)(t)},validateZIPCode:function(t){return(0,p.validateZIPCode)(t)},validateMobileNumber:function(t){return(0,p.validateMobileNumber)(t)},handleTextChange:function(t,n){return o.handleTextChange(t,n)}}),t.default.createElement(c.PrimaryButton,{children:(0,v.default)('next_button'),disabled:!this.state.isRequiredFieldFilled||this.state.isLoading,loading:this.state.isLoading,containerStyle:{marginBottom:60,marginTop:36},onPress:function(){o.handleNextButtonUpdateProfileWithNewInfo(),s.default.NEW_PROFILE_STEP_2_NEXT_PRESS()}}))))}}])&&j(P.prototype,_),x&&j(P,x),O})(),I=(0,y.withUserProfile)(C);e.default=I},1496,[7,10,435,628,1294,633,653,616,1485,1493,1497,1494,637]);