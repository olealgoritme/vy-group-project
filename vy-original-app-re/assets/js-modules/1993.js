__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]),t=r(d[1]),o=r(d[2]),s=r(d[3]),u=(function(){function u(n,t){this._integrations={},this._processing=!1,this._backend=new n(t),this._options=t,t.dsn&&(this._dsn=new o.Dsn(t.dsn)),this._isEnabled()&&(this._integrations=s.setupIntegrations(this._options))}return u.prototype.captureException=function(n,o,s){var u=this,c=o&&o.event_id;return this._processing=!0,this._getBackend().eventFromException(n,o).then(function(n){return u._processEvent(n,o,s)}).then(function(n){c=n&&n.event_id,u._processing=!1}).then(null,function(n){t.logger.error(n),u._processing=!1}),c},u.prototype.captureMessage=function(n,o,s,u){var c=this,l=s&&s.event_id;return this._processing=!0,(t.isPrimitive(n)?this._getBackend().eventFromMessage(""+n,o,s):this._getBackend().eventFromException(n,s)).then(function(n){return c._processEvent(n,s,u)}).then(function(n){l=n&&n.event_id,c._processing=!1}).then(null,function(n){t.logger.error(n),c._processing=!1}),l},u.prototype.captureEvent=function(n,o,s){var u=this,c=o&&o.event_id;return this._processing=!0,this._processEvent(n,o,s).then(function(n){c=n&&n.event_id,u._processing=!1}).then(null,function(n){t.logger.error(n),u._processing=!1}),c},u.prototype.getDsn=function(){return this._dsn},u.prototype.getOptions=function(){return this._options},u.prototype.flush=function(n){var t=this;return this._isClientProcessing(n).then(function(o){return clearInterval(o.interval),t._getBackend().getTransport().close(n).then(function(n){return o.ready&&n})})},u.prototype.close=function(n){var t=this;return this.flush(n).then(function(n){return t.getOptions().enabled=!1,n})},u.prototype.getIntegrations=function(){return this._integrations||{}},u.prototype.getIntegration=function(n){try{return this._integrations[n.id]||null}catch(o){return t.logger.warn("Cannot retrieve integration "+n.id+" from the current Client"),null}},u.prototype._isClientProcessing=function(n){var o=this;return new t.SyncPromise(function(t){var s=0,u=0;clearInterval(u),u=setInterval(function(){o._processing?n&&(s+=1)>=n&&t({interval:u,ready:!1}):t({interval:u,ready:!0})},1)})},u.prototype._getBackend=function(){return this._backend},u.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},u.prototype._prepareEvent=function(o,s,u){var c=this.getOptions(),l=c.environment,p=c.release,v=c.dist,h=c.maxValueLength,_=void 0===h?250:h,f=n.__assign({},o);void 0===f.environment&&void 0!==l&&(f.environment=l),void 0===f.release&&void 0!==p&&(f.release=p),void 0===f.dist&&void 0!==v&&(f.dist=v),f.message&&(f.message=t.truncate(f.message,_));var y=f.exception&&f.exception.values&&f.exception.values[0];y&&y.value&&(y.value=t.truncate(y.value,_));var b=f.request;b&&b.url&&(b.url=t.truncate(b.url,_)),void 0===f.event_id&&(f.event_id=t.uuid4()),this._addIntegrations(f.sdk);var E=t.SyncPromise.resolve(f);return s&&(E=s.applyToEvent(f,u)),E},u.prototype._addIntegrations=function(n){var t=Object.keys(this._integrations);n&&t.length>0&&(n.integrations=t)},u.prototype._processEvent=function(n,o,s){var u=this,c=this.getOptions(),l=c.beforeSend,p=c.sampleRate;return this._isEnabled()?'number'==typeof p&&Math.random()>p?t.SyncPromise.reject('This event has been sampled, will not send event.'):new t.SyncPromise(function(c,p){u._prepareEvent(n,s,o).then(function(n){if(null!==n){var s=n;try{if(o&&o.data&&!0===o.data.__sentry__||!l)return u._getBackend().sendEvent(s),void c(s);var v=l(n,o);if(void 0===v)t.logger.error('`beforeSend` method has to return `null` or a valid event.');else if(t.isThenable(v))u._handleAsyncBeforeSend(v,c,p);else{if(null===(s=v))return t.logger.log('`beforeSend` returned `null`, will not send event.'),void c(null);u._getBackend().sendEvent(s),c(s)}}catch(n){u.captureException(n,{data:{__sentry__:!0},originalException:n}),p('`beforeSend` threw an error, will not send event.')}}else p('An event processor returned null, will not send event.')}).then(null,function(){p('`beforeSend` threw an error, will not send event.')})}):t.SyncPromise.reject('SDK not enabled, will not send event.')},u.prototype._handleAsyncBeforeSend=function(n,t,o){var s=this;n.then(function(n){null!==n?(s._getBackend().sendEvent(n),t(n)):o('`beforeSend` returned `null`, will not send event.')}).then(null,function(n){o("beforeSend rejected with "+n)})},u})();e.BaseClient=u},1993,[1972,1975,1992,1994]);