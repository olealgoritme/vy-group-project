__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,o,s,l){if(n.forEach(function(t){var n=t.route;l&&l[n.key]&&(t.descriptor=l[n.key])}),s===o)return n;var h=new Map,v=new Map,y=new Map;n.forEach(function(t){var n=t.key;t.isStale&&y.set(n,t),h.set(n,t)});var k=new Set,x=o.routes;x.length>o.index+1&&(console.warn('StackRouter provided invalid state, index should always be the top route'),x=o.routes.slice(0,o.index+1));if(x.forEach(function(t,n){var o=u+t.key,s={index:n,isActive:!1,isStale:!1,key:o,route:t,descriptor:l&&l[t.key]};if(k.has(o))throw new Error("navigation.state.routes["+n+"].key \""+o+"\" conflicts with another route!");k.add(o),y.has(o)&&y.delete(o),v.set(o,s)}),s){var p=s.routes;p.length>s.index+1&&(console.warn('StackRouter provided invalid state, index should always be the top route'),p=p.slice(0,s.index+1)),p.forEach(function(t,o){var s=u+t.key;if(!v.has(s)){var c=n.find(function(n){return n.route.key===t.key}),f=c?c.descriptor:l[t.key];f&&y.set(s,{index:o,isActive:!1,isStale:!0,key:s,route:t,descriptor:f})}})}var w=[],E=function(t){var n=t.key,o=h.has(n)?h.get(n):null;o&&f(o,t)?w.push(o):w.push(t)};y.forEach(E),v.forEach(E),w.sort(c);var S=0;if(w.forEach(function(n,u){var s=!n.isStale&&n.index===o.index;s!==n.isActive&&(w[u]=(0,t.default)({},n,{isActive:s})),s&&S++}),1!==S)throw new Error("There should always be only one scene active, not "+S+".");if(w.length!==n.length)return w;if(w.some(function(t,o){return!f(n[o],t)}))return w;return n};var t=o(r(d[0])),n=o(r(d[1]));function o(t){return t&&t.__esModule?t:{default:t}}var u='scene_';function s(t,n){var o=t.length-n.length;return o>0?1:o<0?-1:t>n?1:-1}function c(t,n){return t.index>n.index?1:t.index<n.index?-1:s(t.key,n.key)}function f(t,n){return t.key===n.key&&t.index===n.index&&t.isStale===n.isStale&&t.isActive===n.isActive&&l(t.route,n.route)}function l(t,o){return t&&o?t.key===o.key&&(0,n.default)(t,o):t===o}},601,[433,602]);