__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=P();if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var u=s?Object.getOwnPropertyDescriptor(t,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=t[l]}o.default=t,n&&n.set(t,o);return o})(r(d[0])),n=r(d[1]),o=r(d[2]),s=r(d[3]),l=r(d[4]),u=r(d[5]),c=h(r(d[6])),f=h(r(d[7])),p=h(r(d[8])),y=h(r(d[9])),b=h(r(d[10]));function h(t){return t&&t.__esModule?t:{default:t}}function P(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return P=function(){return t},t}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _(t){if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function M(t){if(Array.isArray(t)){for(var n=0,o=new Array(t.length);n<t.length;n++)o[n]=t[n];return o}}function O(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function S(t,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&w(t,n)}function w(t,n){return(w=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var k=(function(h){function P(t){var n,o,s;return O(this,P),o=this,(n=!(s=E(P).call(this,t))||"object"!=typeof s&&"function"!=typeof s?I(o):s).state={passengers:t.passengers,errorMessage:void 0,isPassengerInformationModalVisible:!1},n.addPassenger=n.addPassenger.bind(I(n)),n.removePassenger=n.removePassenger.bind(I(n)),n.togglePassengerInformationModal=n.togglePassengerInformationModal.bind(I(n)),n}var w,k,C;return j(P,t.Component),w=P,(k=[{key:"componentDidUpdate",value:function(t){(0,u.arrayEquals)(t.passengers,this.props.passengers)||this.setState({passengers:this.props.passengers})}},{key:"addPassenger",value:function(t){this.setState(function(n){var o,s=[].concat(M(o=n.passengers)||_(o)||v(),[{type:t.type,extras:[],discount:null,customerNumber:null}]);return{passengers:s,errorMessage:s.length===l.NUM_OF_PASSENGERS_ORDER_LIMIT?(0,b.default)('reached_maximum_travellers'):void 0}})}},{key:"removePassenger",value:function(t){var n=this.state.passengers.reduce(function(n,o,l){return(0,s.isSameCategory)(o,t)?l:n},-1);this.setState(function(t){return{passengers:t.passengers.filter(function(t,o){return o!==n}),errorMessage:void 0}})}},{key:"togglePassengerInformationModal",value:function(){this.setState(function(t){return{isPassengerInformationModalVisible:!t.isPassengerInformationModalVisible}})}},{key:"render",value:function(){var u=this,h=this.props,P=h.changePassengers,v=h.passengerCategories,_=h.onClose,M=h.isVisible,O=this.state,S=O.passengers,E=O.errorMessage,I=S.length>=l.NUM_OF_PASSENGERS_ORDER_LIMIT,j=S.length>0&&S.length<=l.NUM_OF_PASSENGERS_ORDER_LIMIT;return t.createElement(o.FullScreenModal,{toggleStatusBarStyle:!0,isVisible:M,onClose:_},t.createElement(c.default,{passengerSummary:(0,s.getPassengerSelectionSummary)(S,v),closeModal:_,errorMessage:E}),t.createElement(n.ScrollView,{keyboardShouldPersistTaps:"always",style:{paddingHorizontal:20},contentContainerStyle:{paddingBottom:100}},t.createElement(f.default,{text:(0,b.default)('passengers_header'),onPress:this.togglePassengerInformationModal}),v.map(function(n){return t.createElement(p.default,{key:n.id,categoryName:n.categoryName,canIncrease:!I,onIncrease:function(){return u.addPassenger(n)},onDecrease:function(){return u.removePassenger(n)},count:S.filter(function(t){return t.type===n.type}).length})})),t.createElement(o.ModalBottomButton,{text:(0,b.default)('save'),disabled:!j,onPress:function(){_(),P(S)}}),t.createElement(y.default,{isVisible:this.state.isPassengerInformationModalVisible,onClose:this.togglePassengerInformationModal,passengerCategories:this.props.passengerCategories}))}}])&&S(w.prototype,k),C&&S(w,C),P})();e.default=k},1520,[7,10,653,1296,414,643,1324,1325,1323,1471,1472]);