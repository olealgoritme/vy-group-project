__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=C(r(d[0])),s=r(d[1]),n=r(d[2]),o=b(r(d[3])),l=r(d[4]),u=b(r(d[5])),c=r(d[6]),h=r(d[7]),w=b(r(d[8])),f=C(r(d[9])),p=r(d[10]),P=b(r(d[11])),v=r(d[12]);function b(t){return t&&t.__esModule?t:{default:t}}function y(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return y=function(){return t},t}function C(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=y();if(s&&s.has(t))return s.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var u=o?Object.getOwnPropertyDescriptor(t,l):null;u&&(u.get||u.set)?Object.defineProperty(n,l,u):n[l]=t[l]}return n.default=t,s&&s.set(t,n),n}function O(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function _(t,s){for(var n=0;n<s.length;n++){var o=s[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),s&&S(t,s)}function S(t,s){return(S=Object.setPrototypeOf||function(t,s){return t.__proto__=s,t})(t,s)}var j={isLoading:!0,message:void 0},E=function(t){return{isLoading:!1,message:(0,f.errorMessage)(t)}},M=(function(n){function b(t){var s,n,o;return O(this,b),n=this,(s=!(o=F(b).call(this,t))||"object"!=typeof o&&"function"!=typeof o?I(n):o).state={isLoading:!1,isForgotPasswordActive:!1,newPasswordInput:'',oldPasswordInput:''},s.handlePasswordChangeSubmit=s.handlePasswordChangeSubmit.bind(I(s)),s.handleForgotPasswordClick=s.handleForgotPasswordClick.bind(I(s)),s.handleForgotPasswordClose=s.handleForgotPasswordClose.bind(I(s)),s.handleForgotPasswordFinish=s.handleForgotPasswordFinish.bind(I(s)),s.handleOldPasswordChange=s.handleOldPasswordChange.bind(I(s)),s.handleNewPasswordChange=s.handleNewPasswordChange.bind(I(s)),s}var y,C,S;return k(b,t.Component),y=b,(C=[{key:"handlePasswordChangeSubmit",value:function(){var t,s,n;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return this.setState(j),o.prev=1,t=this.props.navigation.getParam('email'),o.next=5,regeneratorRuntime.awrap((0,l.resetPassword)(t,this.state.oldPasswordInput,this.state.newPasswordInput));case 5:return o.next=7,regeneratorRuntime.awrap((0,l.login)(t,this.state.newPasswordInput));case 7:s=o.sent,(0,c.saveBasicUserInfoInNative)(t,this.state.newPasswordInput,s.coldToken,s.userId),this.setState({isLoading:!1,message:(0,f.successMessage)((0,u.default)('password_was_changed')),oldPasswordInput:'',newPasswordInput:''}),o.next=16;break;case 12:o.prev=12,o.t0=o.catch(1),n=(0,h.getMessageFromErrorIfPresent)(o.t0)||(0,u.default)('change_password_failed'),this.setState(E(n));case 16:case"end":return o.stop()}},null,this,[[1,12]])}},{key:"handleForgotPasswordClick",value:function(){this.setState({isForgotPasswordActive:!0})}},{key:"handleForgotPasswordClose",value:function(){this.setState({isForgotPasswordActive:!1})}},{key:"handleForgotPasswordFinish",value:function(){this.setState({message:(0,f.successMessage)((0,u.default)('forgot_password_success')),isForgotPasswordActive:!1})}},{key:"handleOldPasswordChange",value:function(t){this.setState({oldPasswordInput:t})}},{key:"handleNewPasswordChange",value:function(t){this.setState({newPasswordInput:t})}},{key:"render",value:function(){var n=this.props.navigation.state.params.email;return t.createElement(v.KeyboardSafeScrollView,null,t.createElement(s.View,{style:{marginHorizontal:18}},t.createElement(w.default,{email:n,isVisible:this.state.isForgotPasswordActive,onClose:this.handleForgotPasswordClose,onComplete:this.handleForgotPasswordFinish}),t.createElement(P.default,{style:{marginTop:42},source:p.greenProfile,text:(0,u.default)('change_password')}),t.createElement(f.default,{style:{marginTop:20},message:this.state.message}),t.createElement(s.View,{style:{marginTop:30}},t.createElement(o.default,{isLoading:this.state.isLoading,onSubmit:this.handlePasswordChangeSubmit,onForgotPasswordClick:this.handleForgotPasswordClick,oldPasswordInput:this.state.oldPasswordInput,onOldPasswordChange:this.handleOldPasswordChange,newPasswordInput:this.state.newPasswordInput,onNewPasswordChange:this.handleNewPasswordChange}))))}}])&&_(y.prototype,C),S&&_(y,S),b})();M.navigationOptions=function(){return{headerTitle:(0,u.default)('change_password')}};var N=(0,n.withNavigation)(M);e.default=N},1832,[7,10,435,1833,616,1834,632,626,1483,1487,675,1486,653]);